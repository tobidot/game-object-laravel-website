{"version":3,"sources":["game/config/UserInterfaceAction.ts","../node_modules/@game.object/ts-game-toolbox/src/geometries/Vector2.ts","../node_modules/@game.object/ts-game-toolbox/src/geometries/Rect.ts","game/services/MenuBuilder.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/controllers/Controller.ts","game/controllers/BaseController.ts","game/controllers/GameController.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/events/ControllerEvent.ts","game/controllers/event_controllers/GameEventController.ts","../node_modules/@game.object/ts-game-toolbox/src/signals/ChainProperty.ts","game/controllers/promise_controllers/DelayController.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/adapters/UserInterfaceModelAdapter.ts","../node_modules/@game.object/ts-game-toolbox/src/signals/SignalSocket.ts","../node_modules/@game.object/ts-game-toolbox/src/signals/ObservableSocket.ts","../node_modules/@game.object/ts-game-toolbox/src/signals/index.ts","../node_modules/@game.object/ts-game-toolbox/src/assets/manager/AssetManager.ts","../node_modules/@game.object/ts-game-toolbox/src/assets/index.ts","../node_modules/@game.object/ts-game-toolbox/src/geometries/index.ts","../node_modules/@game.object/ts-game-toolbox/src/testing/exceptions/ExceptionExpectedException.ts","../node_modules/@game.object/ts-game-toolbox/src/testing/TestClass.ts","../node_modules/@game.object/ts-game-toolbox/src/testing/TestConsoleLogElement.ts","../node_modules/@game.object/ts-game-toolbox/src/testing/TestDashboard.ts","../node_modules/@game.object/ts-game-toolbox/src/testing/index.ts","../node_modules/@game.object/ts-game-toolbox/src/trees/exceptions/TreeElementNotFoundException.ts","../node_modules/@game.object/ts-game-toolbox/src/trees/QuadTree.ts","../node_modules/@game.object/ts-game-toolbox/src/trees/index.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/models/Model.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/views/View.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/views/CanvasView.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/helpers/ControllerEvent.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/helpers/ControllerResponse.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/MVCgame.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/MvcGame.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/MvcCanvasGame.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/models/ModelTable.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/controllers/PromiseController.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/index.ts","../node_modules/@game.object/ts-game-toolbox/src/data/RgbColor.ts","../node_modules/@game.object/ts-game-toolbox/src/data/index.ts","../node_modules/@game.object/ts-game-toolbox/src/commons/Colors.ts","../node_modules/@game.object/ts-game-toolbox/src/commons/index.ts","../node_modules/@game.object/ts-game-toolbox/src/flow/asserts/AssertNever.ts","../node_modules/@game.object/ts-game-toolbox/src/flow/responses/BranchingResponse.ts","../node_modules/@game.object/ts-game-toolbox/src/flow/index.ts","../node_modules/@game.object/ts-game-toolbox/index.ts","game/models/MenuButtonModel.ts","game/models/MenuGroupModel.ts","game/controllers/event_controllers/MenuEventController.ts","game/controllers/ControllerCollection.ts","tools/RemoteChainProperty.ts","game/views/main/MainView.ts","game/views/main/MenuView.ts","game/views/main/TestView.ts","game/views/ViewCollection.ts","game/models/GameModel.ts","game/models/CameraModel.ts","game/models/ModelCollection.ts","game/base/Game.ts","game/main.ts","index.ts","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.77de5100.js","sourceRoot":"..\\src","sourcesContent":["export enum UserInterfaceAction {\r\n    TOGGLE_MENU_GROUP,\r\n    OPTION_1,\r\n    OPTION_2,\r\n    OPTION_3,\r\n    OPTION_4,\r\n}","type radians = number;\r\ntype degrees = number;\r\n\r\nexport interface Vector2I {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport class Vector2 {\r\n    public x: number;\r\n    public y: number;\r\n\r\n    public constructor(vec: Readonly<Vector2I>)\r\n    public constructor(x?: number, y?: number)\r\n    public constructor(x: number | Readonly<Vector2I> = 0, y: number = 0) {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n    }\r\n\r\n    public set(vec: Readonly<Vector2I>): this\r\n    public set(x: number, y: number): this\r\n    public set(x: number | Readonly<Vector2I>, y: number = 0): this {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public sub(other: Vector2I): this {\r\n        this.x -= other.x;\r\n        this.y -= other.y;\r\n        return this;\r\n    }\r\n\r\n    public add(other: Vector2I): this {\r\n        this.x += other.x;\r\n        this.y += other.y;\r\n        return this;\r\n    }\r\n\r\n    public mul(scalar: number): this {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        return this;\r\n    }\r\n\r\n    public divide(scalar: number): this {\r\n        this.x /= scalar;\r\n        this.y /= scalar;\r\n        return this;\r\n    }\r\n\r\n    public len2(): number {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n\r\n    public len(): number {\r\n        return Math.sqrt(this.len2());\r\n    }\r\n\r\n    public set_magnitude(magnitude: number): this {\r\n        const len = this.len();\r\n        this.x = this.x / len * magnitude;\r\n        this.y = this.y / len * magnitude;\r\n        return this;\r\n    }\r\n\r\n    public dot(other: Vector2I): number {\r\n        return this.x * other.x + this.y * other.y;\r\n    }\r\n\r\n    public cross(other: Vector2I): Vector2 {\r\n        return new Vector2(this.x * other.y, this.y * other.x);\r\n    }\r\n\r\n    public get_unsigned(): Vector2 {\r\n        return new Vector2(Math.abs(this.x), Math.abs(this.y));\r\n    }\r\n\r\n    public cpy(): Vector2 {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n\r\n    public normalize(): this {\r\n        const len = this.len();\r\n        if (len < 0.000001) return this;\r\n        this.x /= len;\r\n        this.y /= len;\r\n        return this;\r\n    }\r\n\r\n    public get_projection_of(other: Vector2I): Vector2 {\r\n        const len = this.dot(other) / this.len2();\r\n        return this.cpy().mul(len);\r\n    }\r\n\r\n    public is_null_vector(): boolean {\r\n        return Math.abs(this.x) < 0.001 && Math.abs(this.y) < 0.001;\r\n    }\r\n\r\n    public get_angle(): radians {\r\n        // let 0 be showing up (0,1)\r\n        return (Math.atan2(this.y, this.x) + (Math.PI / 2)) % (2 * Math.PI);\r\n    }\r\n\r\n    public rotate_radians_clockwise(radians: number): this {\r\n        const sin = Math.sin(radians);\r\n        const cos = Math.cos(radians);\r\n        const new_x = -sin * this.y + cos * this.x;\r\n        const new_y = sin * this.x + cos * this.y;\r\n        this.y = new_y;\r\n        this.x = new_x;\r\n        return this;\r\n    }\r\n\r\n    public rotate_right_angles_clockwise(count: number = 1): this {\r\n        if (count < 1) return this;\r\n        const new_x = this.y;\r\n        this.y = -this.x;\r\n        this.x = new_x;\r\n        return this.rotate_right_angles_clockwise(count - 1);\r\n    }\r\n\r\n    /**\r\n     * ### Static methods\r\n     */\r\n\r\n    /**\r\n     * Standard Vectors\r\n     */\r\n    public static readonly RIGHT = new Vector2(1, 0);\r\n    public static readonly LEFT = new Vector2(-1, 0);\r\n    public static readonly UP = new Vector2(0, -1);\r\n    public static readonly DOWN = new Vector2(0, 1);\r\n\r\n    /**\r\n     * Create a Vector2 from an angle and a length.\r\n     * An angle of 0 points to the right, turning clockwise.\r\n     *\r\n     * @param angle\r\n     * @param length\r\n     */\r\n    public static from_angle(angle: radians, length: number = 1): Vector2 {\r\n        return new Vector2(Math.cos(angle) * length, Math.sin(angle) * length);\r\n    }\r\n\r\n}","import {Vector2, Vector2I} from \"./Vector2\";\r\n\r\nexport interface RectI {\r\n    x: number,\r\n    y: number,\r\n    w: number,\r\n    h: number\r\n}\r\n\r\n/**\r\n * @class Rect\r\n * A helper class for Rectangles\r\n */\r\nexport class Rect implements RectI {\r\n    public constructor(public x: number = 0, public y: number = 0, public w: number = 0, public h: number = 0) {\r\n\r\n    }\r\n\r\n    public get left(): number {\r\n        return this.x;\r\n    }\r\n\r\n    public get_left(): number {\r\n        return this.x;\r\n    }\r\n\r\n    public get top(): number {\r\n        return this.y;\r\n    }\r\n\r\n    public get_top(): number {\r\n        return this.y;\r\n    }\r\n\r\n    public get right(): number {\r\n        return this.x + this.w;\r\n    }\r\n\r\n    public get_right(): number {\r\n        return this.x + this.w;\r\n    }\r\n\r\n    public get_bottom(): number {\r\n        return this.y + this.h;\r\n    }\r\n\r\n    public get bottom(): number {\r\n        return this.y + this.h;\r\n    }\r\n\r\n    public get width(): number {\r\n        return this.w;\r\n    }\r\n\r\n    public get_width(): number {\r\n        return this.w;\r\n    }\r\n\r\n    public get height(): number {\r\n        return this.h;\r\n    }\r\n\r\n    public get_height(): number {\r\n        return this.h;\r\n    }\r\n\r\n    public cpy(): Rect {\r\n        return new Rect(this.x, this.y, this.w, this.h);\r\n    }\r\n\r\n    public set(x: RectI): this;\r\n    public set(x: number, y: number, w?: number, h?: number): this;\r\n    public set(x: number | RectI, y?: number, w?: number, h?: number): this {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n            this.w = x.w;\r\n            this.h = x.h;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y as number;\r\n            if (w !== undefined) this.w = w;\r\n            if (h !== undefined) this.h = h;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Secondary properties\r\n     */\r\n\r\n    public get_area(): number {\r\n        return this.w * this.h;\r\n    }\r\n\r\n    public get center(): Vector2I {\r\n        return new Vector2(this.x + this.w / 2, this.y + this.h / 2);\r\n    }\r\n\r\n    public set center(center: Vector2I) {\r\n        this.x = center.x - this.w / 2;\r\n        this.y = center.y - this.h / 2;\r\n    }\r\n\r\n    public set_center(center: Vector2I): this {\r\n        this.center = center;\r\n        return this;\r\n    }\r\n\r\n\r\n    /**\r\n     * Expand this rectangle to include the given target.\r\n     * @param target\r\n     */\r\n    public expand_to(target: Readonly<Vector2I>): this {\r\n        if (this.contains(target)) return this;\r\n        const left = Math.min(this.x, target.x);\r\n        const top = Math.min(this.y, target.y);\r\n        const right = Math.max(this.get_right(), target.x);\r\n        const bottom = Math.max(this.get_bottom(), target.y);\r\n        return this.set(left, top, right - left, bottom - top);\r\n    }\r\n\r\n    public overlaps_with(other: RectI): boolean {\r\n        return Rect.overlap(this, other);\r\n    }\r\n\r\n    public is_within(outer: RectI): boolean {\r\n        return Rect.is_within(this, outer);\r\n    }\r\n\r\n    public contains(point: Vector2I): boolean;\r\n    public contains(x: number, y: number): boolean;\r\n    public contains(x: number | Vector2I, y?: number): boolean {\r\n        if (typeof x === \"object\") {\r\n            return Rect.contains(this, x);\r\n        }\r\n        if (typeof y !== \"number\") throw new Error(\"Unexpected type error\");\r\n        return Rect.contains(this, {x, y});\r\n    }\r\n\r\n    /**\r\n     * Manipulate this rectangle to change into the target rectangle by the factor t.\r\n     *\r\n     * @param target\r\n     * @param t\r\n     *  0 => rectangle is unchanged\r\n     *  ..\r\n     *  1 => the rectangle is identical to the target rectangle.\r\n     */\r\n    public lerp(target: Rect, t: number): this {\r\n        const it = 1 - t;\r\n        this.x = this.x * it + target.x * t;\r\n        this.y = this.y * it + target.y * t;\r\n        this.w = this.w * it + target.w * t;\r\n        this.h = this.h * it + target.h * t;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * This functions returns the corners of this rectangle in clockwise order.\r\n     * Starting with the left-top one.\r\n     *\r\n     * @returns array\r\n     * [ left_top, right_top, right_bottom, left_bottom ]\r\n     */\r\n    public get_corners(): [Vector2I, Vector2I, Vector2I, Vector2I] {\r\n        return [\r\n            {x: this.left, y: this.top},\r\n            {x: this.right, y: this.top},\r\n            {x: this.right, y: this.bottom},\r\n            {x: this.left, y: this.bottom},\r\n        ];\r\n    }\r\n\r\n\r\n    /**\r\n     * ### static function\r\n     */\r\n\r\n    /**\r\n     * Is the given point inside the rectangle.\r\n     * The borders of the rectangle count as inside.\r\n     * @see Rect.contains_exclusive\r\n     *\r\n     * @param rect\r\n     *  The rectangle defining the boundry\r\n     * @param point\r\n     *  The point to check\r\n     * @return boolean\r\n     *  True => the point is inside\r\n     */\r\n    public static contains(rect: RectI, point: Vector2I): boolean {\r\n        return (point.x >= rect.x && point.y >= rect.y && point.x <= rect.x + rect.w && point.y <= rect.y + rect.h);\r\n    }\r\n\r\n    /**\r\n     * Is the given point inside the rectangle.\r\n     * The borders of the rectangle count as outside.\r\n     * @see Rect.contains\r\n     *\r\n     * @param rect\r\n     *  The rectangle bilding the boundry\r\n     * @param point\r\n     *  The point to check\r\n     * @return boolean\r\n     *  True => the point is inside\r\n     */\r\n    public static contains_exclusive(rect: RectI, point: Vector2I): boolean {\r\n        return (point.x > rect.x && point.y > rect.y && point.x < rect.x + rect.w && point.y < rect.y + rect.h);\r\n    }\r\n\r\n    /**\r\n     * Do theses Rectangles overlap\r\n     * @param a\r\n     * @param b\r\n     */\r\n    public static overlap(a: RectI, b: RectI): boolean {\r\n        const overlap_x = (a.x + a.w > b.x && a.x <= b.x) || (b.x + b.w > a.x && b.x <= a.x);\r\n        const overlap_y = (a.y + a.h > b.y && a.y <= b.y) || (b.y + b.h > a.y && b.y <= a.y);\r\n        return overlap_x && overlap_y;\r\n    }\r\n\r\n    /**\r\n     * Is the inner rectangle completly within the outer rectangle.\r\n     *\r\n     * @param inner\r\n     * @param outer\r\n     */\r\n    public static is_within(inner: RectI, outer: RectI) {\r\n        const within_x = inner.x > outer.x && inner.x + inner.w < outer.x + outer.w;\r\n        const within_y = inner.y > outer.y && inner.y + inner.h < outer.y + outer.h;\r\n        return within_x && within_y;\r\n    }\r\n}\r\n","import { ModelCollectionBase } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Collections\";\r\nimport { ModelTable } from \"@game.object/ts-game-toolbox/src/abstract/mvc/models/ModelTable\";\r\nimport { Rect } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { Vector2I } from \"@game.object/ts-game-toolbox/src/geometries/Vector2\";\r\nimport { UserInterfaceAction } from \"../config/UserInterfaceAction\";\r\nimport { CameraModel } from \"../models/CameraModel\";\r\nimport { MenuButtonModel } from \"../models/MenuButtonModel\";\r\nimport { MenuGroupModel } from \"../models/MenuGroupModel\";\r\n\r\ntype MenuBuilderButtonDefinition<T> = T;\r\n\r\ninterface MenuBuilderGroupDefinition<UI_ACTION> {\r\n    items: {\r\n        [title: string]: MenuBuilderGroupDefinition<UI_ACTION> | MenuBuilderButtonDefinition<UI_ACTION>;\r\n    }\r\n    options?: MenuBuilderGroupOptions\r\n};\r\n\r\ninterface MenuBuilderOptions {\r\n    direction: \"row\" | \"collumn\";\r\n    button_width: number,\r\n    button_height: number,\r\n    button_padding: number,\r\n    group_padding: number,\r\n    group_offset_x: number;\r\n    group_offset_y: number;\r\n}\r\n\r\ninterface MenuBuilderGroupOptions {\r\n    position?: Vector2I,\r\n    direction?: \"row\" | \"collumn\",\r\n}\r\n\r\nexport class MenuBuilder<\r\n    UI_ACTION extends UserInterfaceAction,\r\n    COLLECTION extends ModelCollectionBase,\r\n    GROUPS_TABLE extends ModelTable<COLLECTION, MenuGroupModel> = ModelTable<COLLECTION, MenuGroupModel>,\r\n    BUTTONS_TABLE extends ModelTable<COLLECTION, MenuButtonModel> = ModelTable<COLLECTION, MenuButtonModel>,\r\n    > {\r\n\r\n\r\n    public config: MenuBuilderOptions = {\r\n        button_width: 150,\r\n        button_height: 25,\r\n        button_padding: 5,\r\n        group_padding: 10,\r\n        group_offset_x: 10,\r\n        group_offset_y: 10,\r\n        direction: \"collumn\",\r\n    };\r\n\r\n    public constructor(\r\n        protected groups: GROUPS_TABLE,\r\n        protected buttons: BUTTONS_TABLE,\r\n        protected toggle_action_id: UI_ACTION,\r\n    ) {\r\n\r\n    }\r\n\r\n    public set_config(config: Partial<MenuBuilderOptions>) {\r\n        Object.assign(this.config, config);\r\n    }\r\n\r\n    public from_object(\r\n        title: string,\r\n        menu_structure: MenuBuilderGroupDefinition<UI_ACTION>\r\n    ): MenuGroupModel {\r\n        let entries = Object.entries(menu_structure.items);\r\n\r\n        let group = this.groups.insert_new((group) => {\r\n            group.title = title;\r\n            group.is_visible = false;\r\n            group.collider = this.get_collider_for_group(entries.length, menu_structure.options);\r\n            return group;\r\n        });\r\n\r\n        entries.forEach(([title, content]) => {\r\n            if (typeof content !== \"object\") {\r\n                this.add_button_to_group(group, title, content, menu_structure.options);\r\n            } else {\r\n                this.add_group_to_group(group, title, content, menu_structure.options);\r\n            }\r\n        })\r\n\r\n        return group;\r\n    }\r\n\r\n\r\n    public add_button_to_group(group: MenuGroupModel, title: string, content: UI_ACTION, options?: MenuBuilderGroupOptions) {\r\n        return this.buttons.insert_new((button) => {\r\n            button.parent_group_id = group.id;\r\n            button.title = title;\r\n            button.action_id = content;\r\n            button.is_visible = true;\r\n            button.collider = this.get_collider_for_nth_button(group.children.length, options);\r\n            return button;\r\n        });\r\n    }\r\n\r\n    public add_group_to_group(group: MenuGroupModel, title: string, content: MenuBuilderGroupDefinition<UI_ACTION>, options?: MenuBuilderGroupOptions) {\r\n        const button = this.add_button_to_group(group, title, this.toggle_action_id, options);\r\n        // inner group\r\n        let inner_group = this.from_object(title, content);\r\n        inner_group.collider.x += button.collider.x + group.collider.x;\r\n        inner_group.collider.y += button.collider.y + group.collider.y;\r\n        inner_group.toggle_button_id = button.id;\r\n        inner_group.z_index += group.z_index + 1;\r\n        return inner_group;\r\n    }\r\n\r\n\r\n    public get_collider_for_group(children_count: number, options?: MenuBuilderGroupOptions): Rect {\r\n        const option_direction = options?.direction ?? this.config.direction;\r\n        const x = (options?.position?.x ?? this.config.group_offset_x);\r\n        const y = (options?.position?.y ?? this.config.group_offset_y);\r\n        if (option_direction === \"row\") {\r\n            const w = children_count * (this.config.button_width + this.config.button_padding) + this.config.button_padding;\r\n            const h = this.config.button_height + this.config.group_padding * 2;\r\n            return new Rect(x, y, w, h);\r\n        }\r\n        const w = this.config.button_width + this.config.group_padding * 2;\r\n        const h = children_count * (this.config.button_height + this.config.button_padding) + this.config.button_padding;\r\n        return new Rect(x, y, w, h);\r\n    }\r\n\r\n    public get_collider_for_nth_button(index: number, options?: MenuBuilderGroupOptions): Rect {\r\n        const option_direction = options?.direction ?? this.config.direction;\r\n        const w = this.config.button_width;\r\n        const h = this.config.button_height;\r\n        if (option_direction === \"row\") {\r\n            const x = this.config.button_padding + (this.config.button_width + this.config.button_padding) * index;\r\n            const y = this.config.group_padding;\r\n            return new Rect(x, y, w, h);\r\n        }\r\n        const x = this.config.group_padding;\r\n        const y = this.config.button_padding + (this.config.button_height + this.config.button_padding) * index;\r\n        return new Rect(x, y, w, h);\r\n    }\r\n}","import { ControllerCollectionBase, ModelCollectionBase, ViewCollectionBase } from \"../Collections\";\r\nimport { ControllerEvent } from \"../events/ControllerEvent\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./ControllerRouteResponse\";\r\n\r\nexport interface ControllerInterface {\r\n\r\n}\r\nexport class Controller<\r\n    MODEL_COLLECTION extends ModelCollectionBase,\r\n    VIEW_COLLECTION extends ViewCollectionBase,\r\n    CONTROLLER_COLLECTION extends ControllerCollectionBase\r\n    > implements ControllerInterface {\r\n    public constructor(\r\n        protected models: MODEL_COLLECTION,\r\n        protected views: VIEW_COLLECTION,\r\n        protected controllers: CONTROLLER_COLLECTION,\r\n    ) {\r\n\r\n    }\r\n}\r\n\r\nexport function is_controller_interface(controller: any): controller is ControllerInterface {\r\n    return controller instanceof Controller;\r\n}\r\nexport interface EventControllerInterface {\r\n    key_up?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    key_down?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    key_pressed?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    mouse_up?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_down?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_pressed?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_moved?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    update?: (delta_seconds: number) => ControllerRouteResponse;\r\n    custom_event?: (event: ControllerEvent) => ControllerRouteResponse;\r\n}\r\n\r\nexport function is_event_controller_interface(controller: any): controller is EventControllerInterface {\r\n    return controller instanceof Controller;\r\n}","import { Controller } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/Controller\";\r\nimport { ModelCollection } from \"../models/ModelCollection\";\r\nimport { ViewCollection } from \"../views/ViewCollection\";\r\nimport { ControllerCollection } from \"./ControllerCollection\";\r\n\r\nexport class BaseController extends Controller<ModelCollection, ViewCollection, ControllerCollection> {\r\n\r\n}\r\n","import {\r\n    ControllerRouteResponse,\r\n    ControllerRouteResponseType\r\n} from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/ControllerRouteResponse\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { UserInterfaceAction } from \"../config/UserInterfaceAction\";\r\nimport { MenuButtonModel } from \"../models/MenuButtonModel\";\r\nimport { MenuGroupModel } from \"../models/MenuGroupModel\";\r\nimport { ModelCollection } from \"../models/ModelCollection\";\r\nimport { MenuBuilder } from \"../services/MenuBuilder\";\r\nimport { BaseController } from \"./BaseController\";\r\n\r\nexport class GameController extends BaseController {\r\n\r\n    /**\r\n     * Start a new game\r\n     */\r\n    public new_game(): ControllerRouteResponse {\r\n\r\n        this.models.camera.center.set(0, 0);\r\n        // How i want it to be\r\n        let menu_builder = new MenuBuilder<UserInterfaceAction, ModelCollection>(\r\n            this.models.menu_groups,\r\n            this.models.menu_buttons,\r\n            UserInterfaceAction.TOGGLE_MENU_GROUP\r\n        );\r\n        menu_builder.set_config({\r\n            button_width: 100,\r\n            direction: \"collumn\",\r\n        });\r\n        let main_menu_group = menu_builder.from_object(\r\n            \"Menu\", {\r\n            options: {\r\n                position: { x: 25, y: 15 },\r\n                direction: \"row\"\r\n            },\r\n            items: {\r\n                \"Aktion 1\": UserInterfaceAction.OPTION_1,\r\n                \"Aktion 2\": UserInterfaceAction.OPTION_2,\r\n                \"Aktion 3\": UserInterfaceAction.OPTION_3,\r\n                \"Aktion 4\": UserInterfaceAction.OPTION_4,\r\n                \"Sub Menu\": {\r\n                    items: {\r\n                        \"Aktion 1\": UserInterfaceAction.OPTION_1,\r\n                        \"Aktion 2\": UserInterfaceAction.OPTION_2,\r\n                    }\r\n                }\r\n            },\r\n        });\r\n        main_menu_group.is_visible = true;\r\n\r\n\r\n        /// response\r\n        const response: ControllerRouteResponseType = {\r\n            view: this.views.main\r\n                .menu_groups.set(\r\n                    this.models.menu_groups.all()\r\n                )\r\n                .camera.set(this.models.camera),\r\n            controller: this.controllers.for_event.game_controller,\r\n        };\r\n        return response;\r\n    }\r\n\r\n}","export interface ControllerEvent {\r\n    event_name: string;\r\n    fire_at?: number;\r\n}\r\n\r\nexport function is_controller_event(object: any): object is ControllerEvent {\r\n    return typeof object === \"object\" && object.hasOwnProperty('event_name');\r\n}\r\n\r\nexport function is_specific_controller_event<T extends ControllerEvent>(object: any, name: T[\"event_name\"]): object is T {\r\n    return is_controller_event(object) && (!name || object.event_name === name);\r\n}\r\n","import { BaseController } from \"../BaseController\";\r\nimport { EventControllerInterface } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/Controller\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/ControllerRouteResponse\";\r\nimport { MenuButtonModel } from \"../../models/MenuButtonModel\";\r\nimport { PromisableControllerRouteResponseType, PromiseController } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/PromiseController\";\r\nimport { UserInterfaceEvent } from \"../../events/UserInterfaceEvent\";\r\nimport { UserInterfaceModelAdapter } from \"../../models/model-adapters/UserInterfaceModelAdapter\";\r\nimport { Vector2 } from \"@game.object/ts-game-toolbox/src/geometries/Vector2\";\r\nimport { ControllerEvent, is_controller_event, is_specific_controller_event } from \"@game.object/ts-game-toolbox/src/abstract/mvc/events/ControllerEvent\";\r\nimport { UserInterfaceAction } from \"../../config/UserInterfaceAction\";\r\n\r\ntype CustomEventHandler = Map<\r\n    UserInterfaceAction,\r\n    (event: UserInterfaceEvent<UserInterfaceAction>) => ControllerRouteResponse\r\n>;\r\n\r\nexport class GameEventController extends BaseController implements EventControllerInterface {\r\n\r\n    protected custom_event_handler: CustomEventHandler = new Map([\r\n        [\r\n            UserInterfaceAction.TOGGLE_MENU_GROUP,\r\n            (event: UserInterfaceEvent<UserInterfaceAction>) =>\r\n                this.controllers.for_event.menu.toggle_menu_group(event)\r\n        ]\r\n    ]);\r\n\r\n    public update(delta_seconds: number): ControllerRouteResponse {\r\n        return null;\r\n    }\r\n\r\n    public mouse_pressed(event: MouseEvent, x: number, y: number): ControllerRouteResponse {\r\n        let response: ControllerRouteResponse = null;\r\n        if (!response) response = this.controllers.for_event.menu.mouse_pressed(event, x, y);\r\n        return response;\r\n    }\r\n\r\n    public custom_event(event: ControllerEvent): ControllerRouteResponse {\r\n        if (is_specific_controller_event<UserInterfaceEvent<UserInterfaceAction>>(event, \"user-interface-event\")) {\r\n            const handler = this.custom_event_handler.get(event.action_id);\r\n            if (!handler) {\r\n                console.log(\"Unhandled Menu Action \", event);\r\n                return null;\r\n            };\r\n            return handler(event);\r\n        }\r\n        return null;\r\n    }\r\n\r\n}","export class ChainProperty<VIEW, PROPERTY> {\r\n    public constructor(protected view: VIEW, public property: PROPERTY) { }\r\n    public set(value: PROPERTY): VIEW {\r\n        this.property = value;\r\n        return this.view;\r\n    }\r\n    public get(): PROPERTY {\r\n        return this.property;\r\n    }\r\n}\r\n\r\nexport var CP = ChainProperty;","import { ControllerRouteResponseType } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/ControllerRouteResponse\";\r\nimport { PromisableController } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/PromiseController\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/src/signals/ChainProperty\";\r\nimport { EventControllerInterface } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/Controller\";\r\nimport { BaseController } from \"../BaseController\";\r\nimport { ControllerCollection } from \"../ControllerCollection\";\r\n\r\nexport class DelayController extends BaseController implements PromisableController, EventControllerInterface {\r\n    public next: (() => ControllerRouteResponseType) | null = null;\r\n\r\n    public trigger_at = new ChainProperty<this, number>(this, 0);\r\n\r\n    public update() {\r\n        if (performance.now() > this.trigger_at.get()) {\r\n            if (this.next) return this.next();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public mouse_pressed(event: MouseEvent) {\r\n        if (this.next) return this.next();\r\n        return null;\r\n    }\r\n}","import { Rect } from \"../../../geometries/Rect\";\r\nimport { Vector2I } from \"../../../geometries/Vector2\";\r\n\r\nexport interface UserInterfaceAdaptable {\r\n    collider: Rect;\r\n    is_clickable: boolean;\r\n}\r\n\r\nexport class UserInterfaceModelAdapter {\r\n    protected constructor(public target: UserInterfaceAdaptable) { }\r\n\r\n    public is_clicked(in_game_mouse_position: Vector2I): boolean {\r\n        return (this.target.collider.contains(in_game_mouse_position))\r\n            && this.target.is_clickable;\r\n    }\r\n\r\n    /**\r\n     * Static Functions\r\n     */\r\n    private static instance?: UserInterfaceModelAdapter;\r\n\r\n    public static for(target: UserInterfaceAdaptable): UserInterfaceModelAdapter {\r\n        if (!UserInterfaceModelAdapter.instance) {\r\n            UserInterfaceModelAdapter.instance = new UserInterfaceModelAdapter(target);\r\n        }\r\n        UserInterfaceModelAdapter.instance.target = target;\r\n        return UserInterfaceModelAdapter.instance;\r\n    }\r\n}","export interface Listener<T> {\r\n    (signal: T): void;\r\n}\r\n\r\nexport class SignalSocket<T> {\r\n    private listeners: Array<Listener<T>> = [];\r\n    public add(listener: Listener<T>): void {\r\n        this.listeners.push(listener);\r\n    }\r\n    public remove(listener: Listener<T>): void {\r\n        const index: number = this.listeners.indexOf(listener);\r\n        if (index < 0) return;\r\n        const length = this.listeners.length;\r\n        this.listeners[index] = this.listeners[length - 1];\r\n        this.listeners.pop();\r\n    }\r\n    public trigger_event(signal: T) {\r\n        this.listeners.forEach((listener: Listener<T>) => {\r\n            listener(signal);\r\n        });\r\n    }\r\n}","import { SignalSocket } from \"./SignalSocket\";\r\n\r\n\r\nexport class ObservableSocket<T> extends SignalSocket<{ old: T, new: T }> {\r\n    constructor(private value: T) {\r\n        super();\r\n    }\r\n\r\n    public trigger_event() { throw new Error('Do not call this directly'); }\r\n\r\n    public set(new_value: T): void {\r\n        super.trigger_event({\r\n            old: this.value,\r\n            new: new_value,\r\n        });\r\n        this.value = new_value;\r\n    }\r\n\r\n    public get(): T {\r\n        return this.value;\r\n    }\r\n};","import { SignalSocket } from \"./SignalSocket\";\r\nimport { ObservableSocket } from \"./ObservableSocket\";\r\n// export * from \"./SignalSocket\";\r\n// export * from \"./ObservableSocket\";\r\n\r\nexport var signals = {\r\n    SignalSocket,\r\n    ObservableSocket,\r\n};","export class AssetManager {\r\n\r\n}","import { AssetManager } from \"./manager/AssetManager\"\r\n// export * from \"./manager/AssetManager\"\r\n\r\nexport var assets = {\r\n    AssetManager\r\n};","import {Rect} from \"./Rect\";\r\nimport {Vector2} from \"./Vector2\";\r\n\r\nexport var geometries = {\r\n    Rect,\r\n    Vector2,\r\n};","export class TestClassExceptionExpectedExcetpion extends Error {\r\n\r\n}","import { TestClassExceptionExpectedExcetpion } from \"./exceptions/ExceptionExpectedException\";\r\n\r\ntype Printable<T> = { toString(): string };\r\ntype Class<T> = { new(...args: any): T, name: string };\r\ntype Named<T> = { name: string };\r\n\r\nexport abstract class TestClass {\r\n    public abstract get_name(): string;\r\n    public set_up() { console.log(this); }\r\n    public tear_down() { }\r\n    public set_class_up() { }\r\n    public tear_class_down() { }\r\n    public run_all_test_cases() {\r\n        const test = this;\r\n        console.log(\">>> Start \" + test.get_name());\r\n        this.set_class_up();\r\n        for (const test_name of Object.getOwnPropertyNames((<any>test).__proto__)) {\r\n            const test_statement = (<any>test)[test_name];\r\n            if (typeof test_statement === \"function\" && test_name.indexOf('test') === 0) {\r\n                console.log('%c > Run ' + test_name, 'background: blue; color: yellow;');\r\n                test.set_up();\r\n                test_statement.call(test);\r\n                test.tear_down();\r\n                console.log('%c < Done ', 'background: blue; color: green;');\r\n            }\r\n        }\r\n        this.tear_class_down();\r\n        console.log(\"<<< Done \" + test.get_name());\r\n    }\r\n\r\n    public assert_exception<E extends Error>(exception: Class<E>, callback: () => void) {\r\n        try {\r\n            callback();\r\n            throw new TestClassExceptionExpectedExcetpion('Expected an exception from ' + String(callback).substr(0, 255));\r\n        } catch (error) {\r\n            if (!(error instanceof exception)) throw error;\r\n            this.success();\r\n        }\r\n    }\r\n\r\n    public assert_instance_of<T extends Printable<T>>(value: Printable<T>, expected: Class<T>): void {\r\n        if (false === value instanceof expected) {\r\n            throw new Error('Expected ' + value.toString() + ' to be of instance ' + expected.name);\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_equals<T>(value: T, expected: T): void {\r\n        if (value !== expected) {\r\n            throw new Error('Expected ' + String(value) + ' to be equal to ' + String(expected));\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_not_equals<T>(value: T, expected: T): void {\r\n        if (value === expected) {\r\n            throw new Error('Expected ' + String(value) + ' to be NOT equal to ' + String(expected));\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_true<T>(value: boolean): void {\r\n        if (value === false) {\r\n            throw new Error('Expected ' + String(value) + ' to be true');\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_false<T>(value: boolean): void {\r\n        if (value === true) {\r\n            throw new Error('Expected ' + String(value) + ' to be false');\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    private success() {\r\n        console.log('.');\r\n    }\r\n}","export class TestConsoleLogElement {\r\n    private container: HTMLElement;\r\n\r\n    constructor() {\r\n        this.container = this.create_element();\r\n        this.hook_into_console_log();\r\n        this.hook_into_console_error();\r\n        this.hook_into_window_error();\r\n    }\r\n\r\n    public get_element(): HTMLElement {\r\n        return this.container;\r\n    }\r\n\r\n    public clear() {\r\n        this.container.innerHTML = \"\";\r\n    }\r\n\r\n    protected hook_into_console_log() {\r\n        const console_log = window.console.log;\r\n        console.log = (...args: any[]) => {\r\n            console_log(...args);\r\n            this.log(...args);\r\n        };\r\n    }\r\n\r\n    protected hook_into_console_error() {\r\n        const console_error = window.console.error;\r\n        console.error = (...args: any[]) => {\r\n            const text = args[0].toString();\r\n            console_error(text);\r\n            this.log(\"%c\" + text, \"color: red;\", ...args);\r\n        };\r\n    }\r\n\r\n    protected hook_into_window_error() {\r\n        window.addEventListener('error', this.window_on_error_func);\r\n    }\r\n\r\n    protected window_on_error_func: OnErrorEventHandlerNonNull = (\r\n        event: Event | string,\r\n        source?: string,\r\n        lineno?: number,\r\n        colno?: number,\r\n        error?: Error\r\n    ): any => {\r\n        if (event instanceof ErrorEvent) {\r\n            source = event.filename;\r\n            lineno = event.lineno;\r\n            colno = event.colno;\r\n            error = event.error;\r\n        }\r\n        if (error instanceof Error) {\r\n            console.error(error.name + ' : ' + error.message);\r\n        } else {\r\n            console.error(event);\r\n        }\r\n        // const source_file = source?.replace(window.location.origin, '');\r\n        // const error_position = \"[\" + [lineno, colno].join(':') + \"]\";\r\n        // console.error([...new Array(4)].map(() => '=').join('') + source_file + error_position);\r\n    }\r\n\r\n\r\n    protected create_element(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.className = \"test-console-log\";\r\n        return container;\r\n    }\r\n\r\n    public log(...args: any[]) {\r\n        const format_or_log = args.shift();\r\n        if (typeof format_or_log === \"string\") {\r\n            return this.print_format(format_or_log, ...args)\r\n                .then((...rest_args: any[]) => {\r\n                    this.log(...args);\r\n                });\r\n        } else {\r\n            args.forEach((arg: any) => {\r\n                this.print((arg).toString());\r\n            });\r\n        }\r\n    }\r\n\r\n    public async print_format(format: string, ...args: any[]) {\r\n        return new Promise((resolve, reject) => {\r\n            let style = '';\r\n            let text = format;\r\n            if (format.indexOf('%c') === 0) {\r\n                style = args[0];\r\n                text = text.substr(2);\r\n            }\r\n            while (text.indexOf('%s') !== -1) {\r\n                const next = args.shift();\r\n                if (next === null) throw Error('argument mismatch');\r\n                text = text.replace('%s', next.toString());\r\n            }\r\n            this.print(text, style)\r\n        });\r\n    }\r\n\r\n    public print(text: string, style?: string) {\r\n        const span = document.createElement('span');\r\n        if (style) span.style.cssText = style;\r\n        span.innerText = text;\r\n        this.container.append(span);\r\n    }\r\n}","import { TestConsoleLogElement } from \"./TestConsoleLogElement\";\r\nimport { TestClass } from \"./TestClass\";\r\n\r\ninterface TestDashboardElements {\r\n    dashboard: HTMLElement,\r\n    button_list: HTMLElement,\r\n    console_log: TestConsoleLogElement;\r\n}\r\n\r\nexport class TestDashboard {\r\n    private tests: Array<TestClass> = [];\r\n    private elements: TestDashboardElements;\r\n\r\n    constructor() {\r\n        this.elements = this.create_dashboard_elements();\r\n    }\r\n\r\n    public get_element(): HTMLElement {\r\n        return this.elements.dashboard;\r\n    }\r\n\r\n    protected create_dashboard_elements(): TestDashboardElements {\r\n        const dashboard = this.create_dashboard_wrapping_element();\r\n        const button_list = this.create_test_button_list();\r\n        const console_log = new TestConsoleLogElement();\r\n\r\n        dashboard.append(button_list);\r\n        dashboard.append(console_log.get_element());\r\n\r\n        this.elements = {\r\n            dashboard,\r\n            button_list,\r\n            console_log,\r\n        };\r\n\r\n        return this.elements;\r\n    }\r\n\r\n    protected create_dashboard_wrapping_element(): HTMLElement {\r\n        const dashboard = document.createElement('div');\r\n        dashboard.className = 'test-dashboard';\r\n        return dashboard;\r\n    }\r\n\r\n    protected create_test_button_list(): HTMLUListElement {\r\n        const button_list = document.createElement('ul');\r\n        button_list.className = \"test-dashboard__button-list\";\r\n\r\n        const button_start_all = this.create_element_button('Run all tests', this.start_all_tests_func);\r\n        button_list.append(button_start_all);\r\n        this.tests.forEach((test: TestClass) => {\r\n            const button = this.create_element_for_test_button(test);\r\n            button_list.append(button);\r\n        });\r\n        return button_list;\r\n    }\r\n\r\n    protected create_element_for_test_button(test: TestClass): HTMLElement {\r\n        return this.create_element_button(test.get_name(), () => {\r\n            this.elements.console_log.clear();\r\n            test.run_all_test_cases();\r\n        });\r\n    }\r\n\r\n    protected create_element_button(text: string, on_click: () => void): HTMLElement {\r\n        let list_item = document.createElement('li');\r\n        let button = document.createElement('button');\r\n        button.innerText = text;\r\n        button.addEventListener('click', on_click);\r\n        list_item.append(button);\r\n        return list_item;\r\n    }\r\n\r\n    public add_test(tests: TestClass | TestClass[]): this {\r\n        if (!(tests instanceof Array)) {\r\n            tests = [tests];\r\n        }\r\n        tests.forEach((test: TestClass) => {\r\n            this.tests.push(test);\r\n            if (this.elements) {\r\n                this.elements.button_list.append(this.create_element_for_test_button(test));\r\n            }\r\n        });\r\n        return this;\r\n    }\r\n\r\n    public start_all_tests_func = () => {\r\n        this.elements.console_log.clear();\r\n        console.log('Starting Tests ... ');\r\n        for (const test of this.tests) {\r\n            test.run_all_test_cases();\r\n        }\r\n        console.log(' ... Tests finished');\r\n    }\r\n}","// export * from \"./TestClass\"\r\nimport { TestClass } from \"./TestClass\"\r\nimport { TestDashboard } from \"./TestDashboard\";\r\n\r\nexport var testing = {\r\n    TestClass,\r\n    TestDashboard,\r\n};","export class TreeElementNotFoundException extends Error {\r\n    constructor(message?: string) {\r\n        super(message);\r\n        this.name = TreeElementNotFoundException.name;\r\n        Object.setPrototypeOf(this, TreeElementNotFoundException.prototype);\r\n    }\r\n}","import { TreeElementNotFoundException } from \"./exceptions/TreeElementNotFoundException\";\r\nimport { RectI, Rect } from \"../geometries/Rect\";\r\n\r\nexport class QuadTree<T extends RectI> {\r\n    private root_branch: QuadTreeBranch<T>;\r\n\r\n    constructor(base_rect: RectI) {\r\n        this.root_branch = new QuadTreeBranch<T>(base_rect.x, base_rect.y, base_rect.w, base_rect.h);\r\n    }\r\n\r\n    public pick(rect: RectI): Array<T> {\r\n        return this.root_branch.pick(rect);\r\n    }\r\n\r\n    public add(element: T): void {\r\n        let is_within = Rect.is_within(element, this.root_branch);\r\n        if (is_within) {\r\n            this.root_branch.add(element);\r\n        } else {\r\n            this.elevate_root_branch();\r\n            this.add(element);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * First wrap the root in a branch that contains the root at the bottom right,\r\n     * then create a branch wich has that new branch in the bottom left, \r\n     * like that the tree expands in all directions \r\n     */\r\n    public elevate_root_branch() {\r\n        const old_root_branch = this.root_branch;\r\n        const extend_top_left_rect = {\r\n            x: old_root_branch.x - old_root_branch.w,\r\n            y: old_root_branch.y - old_root_branch.h,\r\n            w: old_root_branch.w * 2,\r\n            h: old_root_branch.h * 2,\r\n        };\r\n        const extend_bottom_right_rect = {\r\n            x: extend_top_left_rect.x,\r\n            y: extend_top_left_rect.y,\r\n            w: extend_top_left_rect.w * 2,\r\n            h: extend_top_left_rect.h * 2,\r\n        };\r\n\r\n        this.wrap_root_node_in_node_with_rect(extend_top_left_rect, 2);\r\n        this.wrap_root_node_in_node_with_rect(extend_bottom_right_rect, 0);\r\n    }\r\n\r\n    public wrap_root_node_in_node_with_rect(rect: RectI, node_pos: 0 | 1 | 2 | 3) {\r\n        const wrapper_node = new QuadTreeBranch<T>(\r\n            rect.x,\r\n            rect.y,\r\n            rect.w,\r\n            rect.h,\r\n        );\r\n        wrapper_node.create_child_branches();\r\n        if (!wrapper_node.child_branch_nodes) throw new Error();\r\n        wrapper_node.child_branch_nodes[node_pos] = this.root_branch;\r\n        this.root_branch = wrapper_node;\r\n    }\r\n\r\n    public change_element(element: T, rect: RectI) {\r\n        this.remove(element);\r\n        element.x = rect.x;\r\n        element.y = rect.y;\r\n        element.w = rect.w;\r\n        element.h = rect.h;\r\n        this.add(element);\r\n    }\r\n\r\n    public remove(element: T) {\r\n        if (!this.root_branch.remove(element)) {\r\n            throw new TreeElementNotFoundException();\r\n        }\r\n    }\r\n\r\n    public is_empty(): boolean {\r\n        return this.root_branch.is_empty();\r\n    }\r\n\r\n    public clear() {\r\n        this.root_branch.clear(8);\r\n    }\r\n}\r\n\r\nexport class QuadTreeBranch<T extends RectI> extends Rect {\r\n    public child_branch_nodes: [QuadTreeBranch<T>, QuadTreeBranch<T>, QuadTreeBranch<T>, QuadTreeBranch<T>] | null = null;\r\n    public elements: Array<T> = [];\r\n\r\n    public add(element: T): boolean {\r\n        if (this.child_branch_nodes === null) {\r\n            this.elements.push(element);\r\n            this.create_child_branches_if_necessary();\r\n            return true;\r\n        };\r\n        const overlapping_branches = this.child_branch_nodes.filter((branch) => {\r\n            return branch.overlaps_with(element);\r\n        }, []);\r\n        if (overlapping_branches.length === 0) throw Error('Inconsistent Result');\r\n        if (overlapping_branches.length === 1) {\r\n            overlapping_branches[0].add(element);\r\n        } else {\r\n            this.elements.push(element);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public readd_own_elements(): void {\r\n        const elements = this.elements.splice(0);\r\n        elements.forEach((element) => {\r\n            this.add(element);\r\n        });\r\n    }\r\n\r\n    public create_child_branches_if_necessary() {\r\n        if (this.elements.length < 10) return;\r\n        this.create_child_branches();\r\n        this.readd_own_elements();\r\n    }\r\n\r\n    public create_child_branches() {\r\n        const w_half = this.w / 2;\r\n        const h_half = this.h / 2;\r\n        this.child_branch_nodes = [\r\n            new QuadTreeBranch<T>(this.x, this.y, w_half, h_half),\r\n            new QuadTreeBranch<T>(this.x + w_half, this.y, w_half, h_half),\r\n            new QuadTreeBranch<T>(this.x + w_half, this.y + h_half, w_half, h_half),\r\n            new QuadTreeBranch<T>(this.x, this.y + h_half, w_half, h_half),\r\n        ];\r\n    }\r\n\r\n    public pick(rect: RectI, result: Array<T> = []): Array<T> {\r\n        if (!this.overlaps_with(rect)) return result;\r\n        result.push(...this.elements.filter((element) => Rect.overlap(rect, element)));\r\n        if (this.child_branch_nodes === null) return result;\r\n        if (this.is_within(rect)) return this.pick_all(result);\r\n        for (let branch of this.child_branch_nodes) {\r\n            branch.pick(rect, result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public pick_all(result: Array<T>): Array<T> {\r\n        result.push(...this.elements);\r\n        if (this.child_branch_nodes === null) return result;\r\n        for (let branch of this.child_branch_nodes) {\r\n            branch.pick_all(result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public remove(element: T): boolean {\r\n        const id = this.elements.indexOf(element);\r\n        if (id !== -1) {\r\n            this.elements.splice(id, 1);\r\n            return true;\r\n        }\r\n        if (this.child_branch_nodes === null) return false;\r\n        for (let branch of this.child_branch_nodes) {\r\n            if (branch.remove(element)) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public is_empty(): boolean {\r\n        if (!this.is_self_empty()) return false;\r\n        if (this.child_branch_nodes === null) return true;\r\n        for (let branch of this.child_branch_nodes) {\r\n            if (!branch.is_empty()) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public is_self_empty(): boolean {\r\n        return this.elements.length === 0;\r\n    }\r\n\r\n    public clear(max_levels_deep: number) {\r\n        this.elements.splice(0);\r\n        if (this.child_branch_nodes) {\r\n            if (max_levels_deep <= 0) {\r\n                this.child_branch_nodes = null;\r\n            } else {\r\n                this.child_branch_nodes.forEach((node) => {\r\n                    node.clear(max_levels_deep - 1);\r\n                })\r\n            }\r\n        }\r\n    }\r\n}","import { QuadTree } from \"./QuadTree\";\r\nimport { TreeElementNotFoundException } from \"./exceptions/TreeElementNotFoundException\";\r\nexport * from \"./QuadTree\";\r\nexport * from \"./exceptions/TreeElementNotFoundException\";\r\n\r\nexport var trees = {\r\n    exceptions: {\r\n        TreeElementNotFoundException,\r\n    },\r\n    QuadTree,\r\n}","import { ModelCollectionBase } from \"../Collections\";\r\n\r\nexport interface ModelInterface {\r\n\r\n}\r\n\r\nexport class Model<MODEL_COLLECTION extends ModelCollectionBase> implements ModelInterface {\r\n    constructor(protected models: MODEL_COLLECTION) { }\r\n}","import { ViewCollectionBase } from \"../Collections\";\r\n\r\nexport interface ViewInterface {\r\n    update: (() => void) | null;\r\n    draw: () => void;\r\n    set_update: (update: () => void) => this;\r\n}\r\n\r\nexport function is_view_interface(view: any): view is ViewInterface {\r\n    return view instanceof View;\r\n}\r\nexport class View<VIEW_COLLECTION extends ViewCollectionBase> implements ViewInterface {\r\n    public constructor(protected collection: VIEW_COLLECTION) {\r\n\r\n    }\r\n    public update: (() => void) | null = null;\r\n    public draw() { };\r\n\r\n    public set_update(update: () => void): this {\r\n        this.update = update;\r\n        return this;\r\n    }\r\n}","import { ViewCollectionBase } from \"../Collections\";\r\nimport { View } from \"./View\";\r\n\r\nexport class CanvasView<COLLECTION extends ViewCollectionBase> extends View<COLLECTION> {\r\n    protected context: CanvasRenderingContext2D;\r\n    public constructor(public canvas: HTMLCanvasElement, collection: COLLECTION) {\r\n        super(collection);\r\n        const ctx = canvas.getContext(\"2d\");\r\n        if (!ctx) throw new Error(\"could not create context\");\r\n        this.context = ctx;\r\n    }\r\n    protected reset_canvas_state() {\r\n        this.context.font = \"32px monospace\";\r\n        this.context.textAlign = \"left\";\r\n        this.context.fillStyle = \"black\";\r\n        this.context.strokeStyle = \"white\";\r\n    }\r\n}","import { ControllerEvent } from \"../events/ControllerEvent\";\r\ninterface TimeProvider {\r\n    ingame_time_in_seconds: number\r\n}\r\n\r\nexport function event(event: string | ControllerEvent, time_provider: TimeProvider): ControllerEventConstructor {\r\n    return new ControllerEventConstructor(event, time_provider);\r\n}\r\n\r\n\r\nexport class ControllerEventConstructor implements ControllerEvent {\r\n    public event_name: string;\r\n    public fire_at?: number;\r\n\r\n    constructor(public event: string | ControllerEvent, protected time_provide: TimeProvider) {\r\n        if (typeof event === \"string\") {\r\n            this.event_name = event;\r\n        } else {\r\n            this.event_name = event.event_name;\r\n            Object.assign(this, event);\r\n        }\r\n    }\r\n\r\n    public after_x_seconds(seconds: number): this {\r\n        this.fire_at = this.time_provide.ingame_time_in_seconds + seconds;\r\n        return this;\r\n    }\r\n\r\n    public set_data(data: any) {\r\n        Object.assign(this, data);\r\n        return this;\r\n    }\r\n}","import { is_event_controller_interface } from \"../controllers/Controller\";\r\nimport { ControllerRouteResponseType, ControllerRouteResponse } from \"../controllers/ControllerRouteResponse\";\r\nimport { is_controller_event } from \"../events/ControllerEvent\";\r\nimport { is_view_interface } from \"../views/View\";\r\n\r\n\r\nexport function update_controller_response<T extends ControllerRouteResponseType>(base: T, response: ControllerRouteResponse): T {\r\n    if (response === null) {\r\n        return base;\r\n    }\r\n    if (is_view_interface(response)) {\r\n        base.view = response;\r\n        return base;\r\n    }\r\n    if (is_event_controller_interface(response)) {\r\n        base.controller = response;\r\n        return base;\r\n    }\r\n    if (is_controller_event(response)) {\r\n        if (base.events === undefined) base.events = [];\r\n        base.events.push(response);\r\n        return base;\r\n    }\r\n    base.controller = response.controller;\r\n    base.view = response.view;\r\n    if (response.events !== undefined) {\r\n        if (base.events === undefined) base.events = [];\r\n        base.events.push(...response.events);\r\n    }\r\n    return base;\r\n}","import { EventControllerInterface, is_controller_interface, is_event_controller_interface } from \"./controllers/Controller\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./controllers/ControllerRouteResponse\";\r\nimport { ControllerEvent, is_controller_event } from \"./events/ControllerEvent\";\r\nimport { update_controller_response } from \"./helpers/ControllerResponse\";\r\nimport { is_view_interface, ViewInterface } from \"./views/View\";\r\n\r\n\r\n/**\r\n * <\r\n    // MODEL_COLLECTION extends ModelCollection,\r\n    // VIEW_COLLECTION extends ViewCollection,\r\n    // CONTROLLER_COLLECTION extends ControllerCollection,\r\n    // MODEL extends Model<MODEL_COLLECTION> = Model<MODEL_COLLECTION>,\r\n    // VIEW extends View<VIEW_COLLECTION> = View<VIEW_COLLECTION>,\r\n    // CONTROLLER extends Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION> = Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION>,\r\n    >\r\n */\r\nexport class MvcGame {\r\n    protected active_view: ViewInterface | null = null;\r\n    protected active_controller: EventControllerInterface | null = null;\r\n    protected event_queue: Array<ControllerEvent> = [];\r\n    public ingame_time_in_seconds = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public update(delta_seconds: number) {\r\n        this.ingame_time_in_seconds += delta_seconds;\r\n        if (!this.active_controller) return;\r\n        if (!this.active_controller.update) return;\r\n        this.apply_controller_response(this.active_controller.update(delta_seconds));\r\n        this.handle_events();\r\n    }\r\n\r\n    public handle_events() {\r\n        let event_queue_buffer = [...this.event_queue];\r\n        this.event_queue = [];\r\n        event_queue_buffer = event_queue_buffer.filter((event) => {\r\n            if (event.fire_at && event.fire_at >= this.ingame_time_in_seconds) return true;\r\n            if (!this.active_controller) return false;\r\n            if (!this.active_controller.custom_event) return false;\r\n            this.apply_controller_response(this.active_controller.custom_event(event));\r\n            return false;\r\n        });\r\n        this.event_queue = [...event_queue_buffer, ...this.event_queue];\r\n    }\r\n\r\n    public apply_controller_response(response: ControllerRouteResponse) {\r\n        const response_struct: ControllerRouteResponseType = update_controller_response({}, response);\r\n        if (response_struct.view !== undefined) {\r\n            this.set_active_view(response_struct.view);\r\n        }\r\n        if (response_struct.controller !== undefined) {\r\n            this.set_active_controller(response_struct.controller);\r\n        }\r\n        if (response_struct.events !== undefined) {\r\n            this.event_queue.push(...response_struct.events);\r\n        }\r\n    }\r\n\r\n    public draw() {\r\n        if (!this.active_view) return;\r\n        if (this.active_view.update) {\r\n            this.active_view.update();\r\n        }\r\n        this.active_view.draw();\r\n    }\r\n\r\n    protected set_active_controller(controller: EventControllerInterface | null) {\r\n        this.active_controller = controller;\r\n    }\r\n\r\n    protected set_active_view(view: ViewInterface | null) {\r\n        this.active_view = view;\r\n    }\r\n}","import { EventControllerInterface, is_controller_interface, is_event_controller_interface } from \"./controllers/Controller\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./controllers/ControllerRouteResponse\";\r\nimport { ControllerEvent, is_controller_event } from \"./events/ControllerEvent\";\r\nimport { update_controller_response } from \"./helpers/ControllerResponse\";\r\nimport { is_view_interface, ViewInterface } from \"./views/View\";\r\n\r\n\r\n/**\r\n * <\r\n    // MODEL_COLLECTION extends ModelCollection,\r\n    // VIEW_COLLECTION extends ViewCollection,\r\n    // CONTROLLER_COLLECTION extends ControllerCollection,\r\n    // MODEL extends Model<MODEL_COLLECTION> = Model<MODEL_COLLECTION>,\r\n    // VIEW extends View<VIEW_COLLECTION> = View<VIEW_COLLECTION>,\r\n    // CONTROLLER extends Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION> = Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION>,\r\n    >\r\n */\r\nexport class MvcGame {\r\n    protected active_view: ViewInterface | null = null;\r\n    protected active_controller: EventControllerInterface | null = null;\r\n    protected event_queue: Array<ControllerEvent> = [];\r\n    public ingame_time_in_seconds = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public update(delta_seconds: number) {\r\n        this.ingame_time_in_seconds += delta_seconds;\r\n        if (!this.active_controller) return;\r\n        if (!this.active_controller.update) return;\r\n        this.apply_controller_response(this.active_controller.update(delta_seconds));\r\n        this.handle_events();\r\n    }\r\n\r\n    public handle_events() {\r\n        let event_queue_buffer = [...this.event_queue];\r\n        this.event_queue = [];\r\n        event_queue_buffer = event_queue_buffer.filter((event) => {\r\n            if (event.fire_at && event.fire_at >= this.ingame_time_in_seconds) return true;\r\n            if (!this.active_controller) return false;\r\n            if (!this.active_controller.custom_event) return false;\r\n            this.apply_controller_response(this.active_controller.custom_event(event));\r\n            return false;\r\n        });\r\n        this.event_queue = [...event_queue_buffer, ...this.event_queue];\r\n    }\r\n\r\n    public apply_controller_response(response: ControllerRouteResponse) {\r\n        const response_struct: ControllerRouteResponseType = update_controller_response({}, response);\r\n        if (response_struct.view !== undefined) {\r\n            this.set_active_view(response_struct.view);\r\n        }\r\n        if (response_struct.controller !== undefined) {\r\n            this.set_active_controller(response_struct.controller);\r\n        }\r\n        if (response_struct.events !== undefined) {\r\n            this.event_queue.push(...response_struct.events);\r\n        }\r\n    }\r\n\r\n    public draw() {\r\n        if (!this.active_view) return;\r\n        if (this.active_view.update) {\r\n            this.active_view.update();\r\n        }\r\n        this.active_view.draw();\r\n    }\r\n\r\n    protected set_active_controller(controller: EventControllerInterface | null) {\r\n        this.active_controller = controller;\r\n    }\r\n\r\n    protected set_active_view(view: ViewInterface | null) {\r\n        this.active_view = view;\r\n    }\r\n}","import { ControllerRouteResponse } from \"./controllers/ControllerRouteResponse\";\r\nimport { MvcGame } from \"./MvcGame\";\r\n\r\nexport abstract class MvcCanvasGame<MODELS, VIEWS, CONTROLLERS> extends MvcGame {\r\n    protected canvas: HTMLCanvasElement;\r\n    protected models: MODELS;\r\n    protected views: VIEWS;\r\n    protected controllers: CONTROLLERS;\r\n\r\n    constructor() {\r\n        super();\r\n        const canvas = document.getElementById('canvas');\r\n        if (!(canvas instanceof HTMLCanvasElement)) throw new Error(\"Canvas not found\");\r\n        this.canvas = canvas;\r\n        const models = this.create_models();\r\n        const views = this.create_views(canvas);\r\n        const controllers = this.create_controllers(models, views);\r\n        this.models = models;\r\n        this.views = views;\r\n        this.controllers = controllers;\r\n        this.attach_event_listeners();\r\n        this.apply_controller_response(this.start());\r\n    }\r\n\r\n    protected attach_event_listeners(): void {\r\n        this.canvas.addEventListener(\"keydown\", (event) => {\r\n            if (!this.active_controller) return;\r\n            if (this.active_controller.key_pressed) {\r\n                this.apply_controller_response(this.active_controller.key_pressed(event));\r\n            }\r\n        });\r\n        this.canvas.addEventListener(\"click\", (event) => {\r\n            if (!this.active_controller) return;\r\n            if (this.active_controller.mouse_pressed) {\r\n                const x = (event.x - this.canvas.offsetLeft) * this.canvas.width / this.canvas.clientWidth;\r\n                const y = (event.y - this.canvas.offsetTop) * this.canvas.height / this.canvas.clientHeight;\r\n                const response = this.active_controller.mouse_pressed(event, x, y);\r\n                this.apply_controller_response(response);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected abstract start(): ControllerRouteResponse;\r\n    protected abstract create_models(): MODELS;\r\n    protected abstract create_views(canvas: HTMLCanvasElement): VIEWS;\r\n    protected abstract create_controllers(models: MODELS, views: VIEWS): CONTROLLERS;\r\n}\r\n","import { ModelCollectionBase } from \"../Collections\";\r\nimport { ModelInterface } from \"./Model\";\r\n\r\ninterface ModelClass<MODEL_COLLECTION extends ModelCollectionBase, MODEL> {\r\n    new(collection: MODEL_COLLECTION): MODEL\r\n}\r\n\r\nexport class ModelTable<MODEL_COLLECTION extends ModelCollectionBase, MODEL extends ModelInterface> {\r\n    protected models: Array<MODEL> = [];\r\n    protected model_collection: MODEL_COLLECTION;\r\n    protected model_class: ModelClass<MODEL_COLLECTION, MODEL>;\r\n\r\n    public constructor(model_collection: MODEL_COLLECTION, model_class: ModelClass<MODEL_COLLECTION, MODEL>) {\r\n        this.model_collection = model_collection;\r\n        this.model_class = model_class;\r\n    }\r\n\r\n    public insert_new(modify?: (model: MODEL) => MODEL): MODEL {\r\n        return this.insert(modify\r\n            ? modify(new this.model_class(this.model_collection))\r\n            : new this.model_class(this.model_collection)\r\n        );\r\n    }\r\n\r\n    public insert(model: MODEL): MODEL {\r\n        this.models.push(model);\r\n        return model;\r\n    }\r\n\r\n    public delete(model: MODEL): void {\r\n        this.models = this.models.filter((current) => model !== current);\r\n    }\r\n\r\n    public all(): Array<MODEL> {\r\n        return [...this.models];\r\n    }\r\n\r\n    public filter(callback: (model: MODEL) => boolean): void {\r\n        this.models = this.models.filter(callback);\r\n    }\r\n\r\n    public map(callback: (model: MODEL) => MODEL): void {\r\n        this.models = this.models.map(callback);\r\n    }\r\n\r\n    public for_each(callback: (model: MODEL) => void) {\r\n        this.models.forEach(callback);\r\n    }\r\n\r\n    /**\r\n     * Return a filtered array of models\r\n     *\r\n     * @param property\r\n     * @param expected_value\r\n     */\r\n    public where<T extends keyof MODEL, V extends NotAFunction<MODEL[T]>>(\r\n        property: T,\r\n        expected_value: V | ((found_value: MODEL[T]) => boolean)\r\n    ): Array<MODEL> {\r\n        let callback: (model: MODEL) => boolean;\r\n        if (expected_value instanceof Function) {\r\n            callback = (model: MODEL) => expected_value(model[property]);\r\n        } else {\r\n            callback = (model: MODEL) => model[property] === expected_value;\r\n        }\r\n        return this.models.filter(callback);\r\n    }\r\n}\r\n\r\ntype NotAFunction<T> = T extends Function ? never : T;","import { EventControllerInterface, ControllerInterface } from \"./Controller\";\r\nimport { ControllerEvent } from \"../events/ControllerEvent\";\r\nimport { update_controller_response } from \"../helpers/ControllerResponse\";\r\nimport { ViewInterface } from \"../views/View\";\r\nimport { ControllerRouteResponseType, ControllerRouteResponse } from \"./ControllerRouteResponse\";\r\n\r\n\r\nexport interface PromisableController {\r\n    next: null | (() => ControllerRouteResponseType);\r\n}\r\n\r\nexport type PromisableControllerRouteResponseType = ControllerRouteResponseType & { controller: PromisableController };\r\nexport type PromisableControllerRouteResponse = null | ViewInterface | (EventControllerInterface & PromisableController) | ControllerEvent | PromisableControllerRouteResponseType;\r\ntype PromiseResolver = () => PromisableControllerRouteResponseType;\r\ntype NonPromiseResolver = () => (ControllerRouteResponseType);\r\n\r\nexport class PromiseController implements ControllerRouteResponseType {\r\n    protected next: PromiseController | null = null;\r\n    protected resolver: PromiseResolver;\r\n    protected cached_response: ControllerRouteResponseType | null = null;\r\n\r\n    public constructor(resolver: PromiseResolver | PromisableControllerRouteResponseType) {\r\n        this.resolver = this.create_resolver_function(resolver);\r\n    }\r\n\r\n    protected create_resolver_function(resolver: PromiseResolver | PromisableControllerRouteResponseType): PromiseResolver {\r\n        return () => {\r\n            const response: PromisableControllerRouteResponseType = (typeof resolver === \"object\") ? resolver : resolver();\r\n            response.controller.next = this.create_controller_next_function(response);\r\n            return response;\r\n        };\r\n    }\r\n\r\n    protected create_controller_next_function(response: PromisableControllerRouteResponseType) {\r\n        return () => {\r\n            if (this.next === null) return this;\r\n            this.resolver = this.next.resolver;\r\n            this.cached_response = null;\r\n            this.next = this.next.next;\r\n            return this;\r\n        };\r\n    }\r\n\r\n    protected get response(): ControllerRouteResponseType {\r\n        if (this.cached_response) return this.cached_response;\r\n        const response: (ControllerRouteResponse) = this.resolver();\r\n        this.cached_response = {};\r\n        update_controller_response(this.cached_response, response);\r\n        return this.cached_response;\r\n    }\r\n\r\n    public get view(): ViewInterface | null | undefined {\r\n        return this.response?.view;\r\n    }\r\n\r\n    public get controller(): ControllerInterface | null | undefined {\r\n        return this.response?.controller;\r\n    }\r\n\r\n    public get events(): Array<ControllerEvent> | undefined {\r\n        return this.response?.events;\r\n    }\r\n\r\n    public then(resolve: PromiseResolver | PromisableControllerRouteResponseType | PromiseController): PromiseController {\r\n        if (this.next) {\r\n            this.next.then(resolve);\r\n        } else {\r\n            if (resolve instanceof PromiseController) {\r\n                this.next = resolve;\r\n            } else {\r\n                this.next = new PromiseController(resolve);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public finaly(resolve: NonPromiseResolver | ControllerRouteResponseType): PromiseController {\r\n        if (this.next) {\r\n            this.next.finaly(resolve);\r\n        } else {\r\n            this.next = new FinalPromiseController(resolve);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class FinalPromiseController extends PromiseController {\r\n    public constructor(resolver: NonPromiseResolver | ControllerRouteResponseType) {\r\n        super((): PromisableControllerRouteResponseType => {\r\n            const response: ControllerRouteResponseType = (typeof resolver === \"object\") ? resolver : resolver();\r\n            return response as PromisableControllerRouteResponseType;\r\n        });\r\n    }\r\n\r\n    protected create_resolver_function(resolver: PromiseResolver | PromisableControllerRouteResponseType): PromiseResolver {\r\n        return () => {\r\n            return (typeof resolver === \"object\") ? resolver : resolver();\r\n        };\r\n    }\r\n}\r\n","import { Model } from \"./mvc/models/Model\";\r\nimport { View } from \"./mvc/views/View\";\r\nimport { Controller } from \"./mvc/controllers/Controller\";\r\nimport { CanvasView } from \"./mvc/views/CanvasView\";\r\nimport { ControllerEventConstructor } from \"./mvc/helpers/ControllerEvent\";\r\nimport { MvcGame as MvcGame } from \"./mvc/MVCgame\";\r\nimport { MvcCanvasGame } from \"./mvc/MvcCanvasGame\";\r\nimport { ModelTable } from \"./mvc/models/ModelTable\";\r\nimport { update_controller_response } from \"./mvc/helpers/ControllerResponse\";\r\nimport { PromiseController } from \"./mvc/controllers/PromiseController\";\r\nimport { is_specific_controller_event, is_controller_event } from \"./mvc/events/ControllerEvent\";\r\nimport { UserInterfaceModelAdapter } from \"./mvc/adapters/UserInterfaceModelAdapter\";\r\n\r\n\r\nexport var abstract = {\r\n    mvc: {\r\n        MvcGame,\r\n        MvcCanvasGame,\r\n        helpers: {\r\n            update_controller_response,\r\n        },\r\n        models: {\r\n            Model,\r\n            ModelTable,\r\n        },\r\n        views: {\r\n            CanvasView,\r\n            View,\r\n        },\r\n        controllers: {\r\n            Controller,\r\n            PromiseController\r\n        },\r\n        adapters: {\r\n            UserInterfaceModelAdapter,\r\n        },\r\n        events: {\r\n            ControllerEventConstructor,\r\n            is_controller_event,\r\n            is_specific_controller_event,\r\n        }\r\n    },\r\n};","export class RgbColor {\r\n    public constructor(\r\n        public r: number = 0,\r\n        public g: number = 0,\r\n        public b: number = 0,\r\n        public a: number = 255,\r\n    ) {\r\n\r\n    }\r\n\r\n    public to_hex(): string {\r\n        return \"#\" + [this.r, this.g, this.b, this.a].map(v => (\"00\" + v.toString(16)).substr(-2)).join('');\r\n    }\r\n\r\n    public lerp(other: RgbColor, t: number): RgbColor {\r\n        return new RgbColor(\r\n            this.r * (1 - t) + other.r * t,\r\n            this.g * (1 - t) + other.g * t,\r\n            this.b * (1 - t) + other.b * t,\r\n            this.a * (1 - t) + other.a * t,\r\n        );\r\n    }\r\n}","import { RgbColor } from \"./RgbColor\"\r\n\r\n\r\n\r\nexport var data = {\r\n    RgbColor\r\n};","import { RgbColor } from \"../data/RgbColor\";\r\n\r\nexport var Colors = {\r\n    RED: new RgbColor(255, 0, 0),\r\n    BLUE: new RgbColor(0, 0, 255),\r\n    GREEN: new RgbColor(0, 255, 0),\r\n    BLACK: new RgbColor(0, 0, 0),\r\n    WHITE: new RgbColor(255, 255, 255),\r\n}","import { Colors } from \"./Colors\";\r\n\r\nexport var commons = {\r\n    Colors,\r\n};","export function assert_never(variable: never): never {\r\n    return variable;\r\n}","/**\r\n * Callback type for the Branching Response\r\n */\r\nexport type BranchingResponseCallback<RESPONSE, PARAMETERS> =\r\n    (params: PARAMETERS, previous: RESPONSE) => RESPONSE;\r\n\r\n/**\r\n * @class BranchingResponse\r\n * \r\n * Use this as a function response to allow reacting\r\n * of diffrent states determined inside the function.\r\n * \r\n * e.g. \r\n * \r\n * function handle_number(value:number) : BranchingResponse<number, \"even\"|\"odd\"|\"negative\", number> {\r\n *      if (value < 0) return new BranchingResponse(\"negative\", value);\r\n *      if (value % 2 === 0) return new BranchingResponse(\"even\", value);\r\n *      return new BranchingResponse(\"odd\", value + 1);\r\n * }\r\n * \r\n * let x = ...\r\n * let positive_even = handle_number(x)\r\n *      .do_on_match(()=>0, \"negative\");\r\n */\r\nexport class BranchingResponse<RESPONSE, STATES, PARAMETERS> {\r\n    public constructor(\r\n        private state: STATES,\r\n        private params: PARAMETERS,\r\n        public response: RESPONSE,\r\n    ) { }\r\n    public do_on_match(callback: BranchingResponseCallback<RESPONSE, PARAMETERS>, state: STATES): this {\r\n        if (state === this.state) return this;\r\n        this.response = callback(this.params, this.response);\r\n        return this;\r\n    };\r\n    public do_on_any(callback: BranchingResponseCallback<RESPONSE, PARAMETERS>, states: STATES[]): this {\r\n        if (!states.includes(this.state)) return this;\r\n        this.response = callback(this.params, this.response);\r\n        return this;\r\n    };\r\n    public do_on_none(callback: BranchingResponseCallback<RESPONSE, PARAMETERS>, states: STATES[]): this {\r\n        if (!states.reduce((none_fit, state) => (none_fit && this.state !== state), true)) return this;\r\n        this.response = callback(this.params, this.response);\r\n        return this;\r\n    };\r\n}","import { assert_never } from \"./asserts/AssertNever\";\r\nimport { BranchingResponse } from \"./responses/BranchingResponse\";\r\n\r\nexport var flow = {\r\n    BranchingResponse,\r\n    assert_never,\r\n};","\r\nimport { signals } from \"./src/signals\";\r\nimport { assets } from \"./src/assets\";\r\nimport { geometries } from \"./src/geometries\";\r\nimport { testing } from \"./src/testing\";\r\nimport { trees } from \"./src/trees\";\r\nimport { abstract } from \"./src/abstract\";\r\nimport { data } from \"./src/data\";\r\nimport { commons } from \"./src/commons\";\r\nimport { flow } from \"./src/flow\";\r\n\r\nexport var tools = {\r\n    signals,\r\n    assets,\r\n    geometries,\r\n    testing,\r\n    trees,\r\n    abstract,\r\n    data,\r\n    commons,\r\n    flow,\r\n};","import { tools } from \"@game.object/ts-game-toolbox/index\";\r\nimport { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/models/Model\";\r\nimport { Rect } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\nimport { UserInterfaceAdaptable } from \"./model-adapters/UserInterfaceModelAdapter\";\r\nimport { UserInterfaceAction } from \"../config/UserInterfaceAction\";\r\n\r\nexport class MenuButtonModel extends Model<ModelCollection> implements UserInterfaceAdaptable<UserInterfaceAction> {\r\n    // graphics\r\n    public background: RgbColor = tools.commons.Colors.BLUE;\r\n    public foreground: RgbColor = tools.commons.Colors.WHITE;\r\n    public is_visible: boolean = true;\r\n    public title: string = \"Menu\";\r\n    // logic\r\n    public static next_id: number = 1;\r\n    public id: number = MenuButtonModel.next_id++;\r\n    public parent_group_id: number | null = null;\r\n    public collider: Rect = new Rect(0, 0, 0, 0);\r\n    public action_id: UserInterfaceAction = UserInterfaceAction.OPTION_1;\r\n\r\n    public get is_clickable(): boolean {\r\n        return this.is_visible;\r\n    }\r\n\r\n    public click(): UserInterfaceAction {\r\n        return this.action_id;\r\n    }\r\n}","import { tools } from \"@game.object/ts-game-toolbox/index\";\r\nimport { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/models/Model\";\r\nimport { Rect } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\nimport { UserInterfaceAdaptable } from \"./model-adapters/UserInterfaceModelAdapter\";\r\nimport { UserInterfaceAction } from \"../config/UserInterfaceAction\";\r\nimport { MenuButtonModel } from \"./MenuButtonModel\";\r\n\r\nexport class MenuGroupModel extends Model<ModelCollection> implements UserInterfaceAdaptable<UserInterfaceAction> {\r\n    // graphics\r\n    public background: RgbColor = tools.commons.Colors.BLUE;\r\n    public foreground: RgbColor = tools.commons.Colors.WHITE;\r\n    public is_visible: boolean = true;\r\n    public title: string = \"Menu Group\";\r\n    // logic\r\n    public static next_id = 1;\r\n    public id: number = MenuGroupModel.next_id++;\r\n    public z_index: number = 0;\r\n    public toggle_button_id: number | null = null;\r\n    public collider: Rect = new Rect(0, 0, 0, 0);\r\n\r\n    public get is_clickable(): boolean {\r\n        return this.is_visible;\r\n    }\r\n\r\n    public click(): UserInterfaceAction | null {\r\n        return null;\r\n    }\r\n\r\n    public get children(): Array<MenuButtonModel> {\r\n        return this.models.menu_buttons.all().filter((button: MenuButtonModel) => {\r\n            return button.parent_group_id === this.id;\r\n        });\r\n    }\r\n}","import { UserInterfaceAdaptable, UserInterfaceModelAdapter } from \"@game.object/ts-game-toolbox/src/abstract/mvc/adapters/UserInterfaceModelAdapter\";\r\nimport { EventControllerInterface } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/Controller\";\r\nimport { ControllerRouteResponse } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/ControllerRouteResponse\";\r\nimport { ControllerEvent, is_specific_controller_event } from \"@game.object/ts-game-toolbox/src/abstract/mvc/events/ControllerEvent\";\r\nimport { Vector2, Vector2I } from \"@game.object/ts-game-toolbox/src/geometries/Vector2\";\r\nimport { UserInterfaceAction } from \"../../config/UserInterfaceAction\";\r\nimport { UserInterfaceEvent } from \"../../events/UserInterfaceEvent\";\r\nimport { MenuButtonModel } from \"../../models/MenuButtonModel\";\r\nimport { MenuGroupModel } from \"../../models/MenuGroupModel\";\r\nimport { BaseController } from \"../BaseController\";\r\n\r\nexport class MenuEventController extends BaseController implements EventControllerInterface {\r\n\r\n    public mouse_pressed(event: MouseEvent, x: number, y: number): ControllerRouteResponse {\r\n        const menu_item_clicked = this.get_menu_item_hit(\r\n            this.models.menu_groups.all().sort((a, b) => b.z_index - a.z_index),\r\n            { x, y }\r\n        );\r\n        if (menu_item_clicked) {\r\n            return this.handle_menu_item_selected(menu_item_clicked);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public handle_menu_item_selected(item: MenuButtonModel | MenuGroupModel): UserInterfaceEvent<UserInterfaceAction> | null {\r\n        const action = item.click();\r\n        if (action === null) return null;\r\n        return {\r\n            event_name: \"user-interface-event\",\r\n            action_id: action,\r\n            target: item,\r\n        };\r\n    }\r\n\r\n    public get_menu_item_hit(items: Array<MenuButtonModel | MenuGroupModel>, target: Vector2I): MenuButtonModel | MenuGroupModel | null {\r\n        const hit = items.filter((button: UserInterfaceAdaptable) => {\r\n            return UserInterfaceModelAdapter.for(button).is_clicked(target);\r\n        }).shift() ?? null;\r\n        if (hit instanceof MenuGroupModel && hit.is_visible) {\r\n            const inner_position = new Vector2(target).sub({ x: hit.collider.x, y: hit.collider.y })\r\n            const inner_hit = this.get_menu_item_hit(hit.children, inner_position);\r\n            if (inner_hit) return inner_hit;\r\n        }\r\n        return hit;\r\n    }\r\n\r\n    public toggle_menu_group(event: UserInterfaceEvent<UserInterfaceAction>): ControllerRouteResponse {\r\n        const button = event.target;\r\n        if (!(button instanceof MenuButtonModel)) return null;\r\n        const toggled_groups = this.models.menu_groups.all().filter((group) => group.toggle_button_id === button.id);\r\n        toggled_groups.forEach((group: MenuGroupModel) => {\r\n            group.is_visible = !group.is_visible;\r\n        });\r\n        return null;\r\n    }\r\n}","import { ModelCollection } from \"../models/ModelCollection\";\r\nimport { ViewCollection } from \"../views/ViewCollection\";\r\nimport { GameController } from \"./GameController\";\r\nimport { GameEventController } from \"./event_controllers/GameEventController\";\r\nimport { ControllerCollectionBase } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Collections\";\r\nimport { DelayController } from \"./promise_controllers/DelayController\";\r\nimport { MenuEventController } from \"./event_controllers/MenuEventController\";\r\n\r\nexport interface ControllerCollection extends ControllerCollectionBase {\r\n    game_controller: GameController,\r\n    delay_controller: DelayController,\r\n    for_event: {\r\n        game_controller: GameEventController,\r\n        menu: MenuEventController,\r\n    }\r\n}\r\n\r\nexport function create_controllers(models: ModelCollection, views: ViewCollection): ControllerCollection {\r\n    const controllers: ControllerCollection = {} as ControllerCollection;\r\n    const buffer: ControllerCollection = {\r\n        game_controller: new GameController(models, views, controllers),\r\n        delay_controller: new DelayController(models, views, controllers),\r\n        for_event: {\r\n            game_controller: new GameEventController(models, views, controllers),\r\n            menu: new MenuEventController(models, views, controllers),\r\n        }\r\n    };\r\n    return Object.assign(controllers, buffer);\r\n}","import { ChainProperty } from \"@game.object/ts-game-toolbox/src/signals/ChainProperty\";\r\nimport { MainView } from \"../game/views/main/MainView\";\r\nimport { MenuView } from \"../game/views/main/MenuView\";\r\n\r\n\r\nexport class RemoteChainProperty<\r\n    CHAIN,\r\n    REMOTE_CLASS extends { [K in REMOTE_KEY]: ChainProperty<REMOTE_CLASS, any> },\r\n    REMOTE_KEY extends KeysOfType<REMOTE_CLASS, ChainProperty<REMOTE_CLASS, any>>,\r\n    PROPERTY_TYPE extends REMOTE_CLASS[REMOTE_KEY][\"property\"] = REMOTE_CLASS[REMOTE_KEY][\"property\"]\r\n    > {\r\n    public constructor(\r\n        protected chain: CHAIN,\r\n        protected remote: REMOTE_CLASS,\r\n        protected key: REMOTE_KEY\r\n    ) {\r\n    }\r\n    public set(value: PROPERTY_TYPE): CHAIN {\r\n        this.remote[this.key].set(value);\r\n        return this.chain;\r\n    }\r\n    public get(): PROPERTY_TYPE {\r\n        return this.remote[this.key].get();\r\n    }\r\n}\r\n\r\ntype KeysOfType<CLASS, TYPE> = {\r\n    [K in keyof CLASS]: CLASS[K] extends TYPE\r\n    ? K\r\n    : never\r\n}[keyof CLASS];\r\n\r\nexport var RCP = RemoteChainProperty;","import { tools } from \"@game.object/ts-game-toolbox/index\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/src/signals/ChainProperty\";\r\nimport { ViewCollection } from \"../ViewCollection\";\r\nimport { Rect, RectI } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { CanvasView } from \"@game.object/ts-game-toolbox/src/abstract/mvc/views/CanvasView\";\r\nimport { CameraModel } from \"../../models/CameraModel\";\r\nimport { MenuView } from \"./MenuView\";\r\nimport { RemoteChainProperty } from \"../../../tools/RemoteChainProperty\";\r\n\r\nexport class MainView extends CanvasView<ViewCollection> {\r\n    /// Base Colors\r\n    public bg_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.BLACK);\r\n    public fg_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.WHITE);\r\n    public hi_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.RED);\r\n    /// memory cards\r\n    public menu_groups: RemoteChainProperty<this, MenuView, \"menu_groups\">;\r\n    public camera = new ChainProperty<this, CameraModel | null>(this, null);\r\n\r\n    constructor(canvas: HTMLCanvasElement, collection: ViewCollection, menu_view: MenuView) {\r\n        super(canvas, collection);\r\n        this.menu_groups = new RemoteChainProperty<this, MenuView, \"menu_groups\">(this, this.collection.menu, 'menu_groups')\r\n    }\r\n\r\n    public draw(): void {\r\n        if (!this.camera.get()) return;\r\n\r\n\r\n        this.reset_canvas_state();\r\n        this.collection.menu\r\n            .camera.set(this.camera.get())\r\n            .draw()\r\n\r\n        this.context.fillStyle = \"#ff0000\";\r\n        this.context.fillText(\"Test\", 400, 300);\r\n    }\r\n\r\n    /**\r\n     * Reset default canvas state and paint the background\r\n     */\r\n    protected reset_canvas_state() {\r\n        super.reset_canvas_state();\r\n        this.context.resetTransform();\r\n        this.context.fillStyle = this.bg_color.get().to_hex();\r\n        this.context.fillRect(0, 0, 800, 600);\r\n        this.context.fillStyle = this.fg_color.get().to_hex();\r\n        this.context.lineWidth = 2;\r\n        this.context.font = \"16px monospace\";\r\n        this.context.lineJoin = \"round\";\r\n        this.context.textAlign = \"left\";\r\n        this.context.textBaseline = \"top\";\r\n        this.context.imageSmoothingEnabled = false;\r\n    }\r\n}","import { tools } from \"@game.object/ts-game-toolbox/index\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/src/signals/ChainProperty\";\r\nimport { ViewCollection } from \"../ViewCollection\";\r\nimport { Rect, RectI } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { CanvasView } from \"@game.object/ts-game-toolbox/src/abstract/mvc/views/CanvasView\";\r\nimport { CameraModel } from \"../../models/CameraModel\";\r\n\r\ninterface ViewMenuButtonAttr {\r\n    background: RgbColor;\r\n    foreground: RgbColor;\r\n    is_visible: boolean;\r\n    title: string;\r\n    collider: RectI;\r\n}\r\n\r\ninterface ViewMenuGroupAttr {\r\n    background: RgbColor;\r\n    foreground: RgbColor;\r\n    is_visible: boolean;\r\n    collider: RectI;\r\n    title: string;\r\n\r\n    children: Array<ViewMenuButtonAttr | ViewMenuGroupAttr>;\r\n}\r\n\r\nexport class MenuView extends CanvasView<ViewCollection> {\r\n    /// Base Colors\r\n    public bg_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.BLACK);\r\n    public fg_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.WHITE);\r\n    public hi_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.RED);\r\n    /// memory cards\r\n    public menu_groups = new ChainProperty<this, Array<ViewMenuGroupAttr>>(this, []);\r\n    public camera = new ChainProperty<this, CameraModel | null>(this, null);\r\n\r\n    public draw(): void {\r\n        if (!this.camera.get()) return;\r\n\r\n        this.reset_canvas_state();\r\n\r\n        this.context.strokeStyle = \"#282828\";\r\n\r\n        this.menu_groups.get().forEach((group: ViewMenuGroupAttr) => {\r\n            this.draw_menu_group(group);\r\n        });\r\n\r\n    }\r\n\r\n    protected draw_menu_group(group: ViewMenuGroupAttr) {\r\n        if (!group.is_visible) return;\r\n        this.draw_menu_item_borders(group);\r\n        this.context.save();\r\n        this.context.translate(group.collider.x, group.collider.y);\r\n        this.context.beginPath();\r\n        group.children.forEach((item) => {\r\n            if ('children' in item) {\r\n                this.draw_menu_group(item);\r\n            } else {\r\n                this.draw_menu_button(item);\r\n            }\r\n        });\r\n        this.context.strokeStyle = this.fg_color.get().to_hex();\r\n        this.context.stroke();\r\n        this.context.restore();\r\n    }\r\n\r\n    protected draw_menu_button(button: ViewMenuButtonAttr) {\r\n        this.draw_menu_item_borders(button);\r\n        this.context.fillStyle = button.foreground.to_hex();\r\n        this.context.fillText(button.title,\r\n            button.collider.x + button.collider.w / 2,\r\n            button.collider.y + button.collider.h / 2,\r\n        );\r\n    }\r\n\r\n    protected draw_menu_item_borders(item: ViewMenuGroupAttr | ViewMenuButtonAttr) {\r\n        if (!item.is_visible) return;\r\n        this.context.fillStyle = item.background.to_hex();\r\n        this.context.fillRect(item.collider.x, item.collider.y, item.collider.w, item.collider.h);\r\n        this.context.rect(item.collider.x, item.collider.y, item.collider.w, item.collider.h);\r\n    }\r\n\r\n    /**\r\n     * Reset default canvas state and paint the background\r\n     */\r\n    protected reset_canvas_state() {\r\n        super.reset_canvas_state();\r\n        this.context.resetTransform();\r\n        this.context.lineWidth = 2;\r\n        this.context.font = \"16px monospace\";\r\n        this.context.lineJoin = \"round\";\r\n        this.context.textAlign = \"center\";\r\n        this.context.textBaseline = \"middle\";\r\n        this.context.imageSmoothingEnabled = false;\r\n    }\r\n}","import { tools } from \"@game.object/ts-game-toolbox/index\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/src/signals/ChainProperty\";\r\nimport { ViewCollection } from \"../ViewCollection\";\r\nimport { RectI } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { CameraModel } from \"../../models/CameraModel\";\r\nimport { CanvasView } from \"@game.object/ts-game-toolbox/src/abstract/mvc/views/CanvasView\";\r\n\r\nexport class TestView extends CanvasView<ViewCollection> {\r\n\r\n    public draw(): void {\r\n        this.reset_canvas_state();\r\n        this.context.fillText(\"Test\", 100, 100);\r\n    }\r\n\r\n    /**\r\n     * Reset default canvas state and paint the background\r\n     */\r\n    protected reset_canvas_state() {\r\n        super.reset_canvas_state();\r\n        this.context.fillStyle = \"#000000\";\r\n        this.context.fillRect(0, 0, 800, 600);\r\n        this.context.fillStyle = \"#ff0000\";\r\n        this.context.lineWidth = 2;\r\n        this.context.font = \"16px monospace\";\r\n        this.context.lineJoin = \"round\";\r\n        this.context.textAlign = \"left\";\r\n        this.context.textBaseline = \"top\";\r\n        this.context.imageSmoothingEnabled = false;\r\n    }\r\n}","import { ViewCollectionBase } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Collections\";\r\nimport { MainView } from \"./main/MainView\";\r\nimport { MenuView } from \"./main/MenuView\";\r\nimport { TestView } from \"./main/TestView\";\r\n\r\nexport interface ViewCollection extends ViewCollectionBase {\r\n    main: MainView,\r\n    menu: MenuView,\r\n    test: TestView,\r\n    partials: {\r\n    }\r\n}\r\n\r\nexport function create_views(canvas: HTMLCanvasElement): ViewCollection {\r\n    const collection: ViewCollection = {\r\n        partials: {}\r\n    } as ViewCollection;\r\n    collection.menu = new MenuView(canvas, collection);\r\n    collection.test = new TestView(canvas, collection);\r\n    collection.main = new MainView(canvas, collection, collection.menu);\r\n    return collection;\r\n}","import { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/models/Model\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\n\r\nexport class GameModel extends Model<ModelCollection> {\r\n\r\n}","import { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/models/Model\";\r\nimport { assert_never } from \"@game.object/ts-game-toolbox/src/flow/asserts/AssertNever\";\r\nimport { Rect } from \"@game.object/ts-game-toolbox/src/geometries/Rect\";\r\nimport { Vector2, Vector2I } from \"@game.object/ts-game-toolbox/src/geometries/Vector2\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\n\r\nexport class CameraModel extends Model<ModelCollection>{\r\n    // Center of the camera\r\n    public center = new Vector2(0, 0);\r\n\r\n    /**\r\n     * \r\n     * @param shape \r\n     *  The object to map to the \"camera\"-coordinates\r\n     * @return \r\n     *  The transformed object\r\n     */\r\n    public reverse_transform(shape: Rect): Rect;\r\n    public reverse_transform(shape: Vector2): Vector2;\r\n    public reverse_transform(shape: Vector2 | Rect): Vector2 | Rect {\r\n        if (shape instanceof Rect) return this.reverse_transform_rect(shape);\r\n        if (shape instanceof Vector2) return this.reverse_transform_vector_2(shape);\r\n        return assert_never(shape);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param shape \r\n     *  The object to map to the \"world\"-coordinates\r\n     * @return \r\n     *  The transformed object\r\n     */\r\n    public transform(shape: Rect): Rect;\r\n    public transform(shape: Vector2): Vector2;\r\n    public transform(shape: Vector2 | Rect): Vector2 | Rect {\r\n        if (shape instanceof Rect) return this.transform_rect(shape);\r\n        if (shape instanceof Vector2) return this.transform_vector_2(shape);\r\n        return assert_never(shape);\r\n    }\r\n\r\n    public reverse_transform_vector_2(vector2: Vector2): Vector2 {\r\n        return vector2.sub(this.center);\r\n    }\r\n\r\n    public reverse_transform_rect(rect: Rect): Rect {\r\n        rect.x -= this.center.x;\r\n        rect.y -= this.center.y;\r\n        return rect;\r\n    }\r\n\r\n    public transform_vector_2(vector2: Vector2): Vector2 {\r\n        return vector2.add(this.center);\r\n    }\r\n\r\n    public transform_rect(rect: Rect): Rect {\r\n        rect.x += this.center.x;\r\n        rect.y += this.center.y;\r\n        return rect;\r\n    }\r\n\r\n}","import { ModelTable } from \"@game.object/ts-game-toolbox/src/abstract/mvc/models/ModelTable\";\r\nimport { ModelCollectionBase } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Collections\";\r\nimport { GameModel } from \"./GameModel\";\r\nimport { MenuButtonModel } from \"./MenuButtonModel\";\r\nimport { CameraModel } from \"./CameraModel\";\r\nimport { MenuGroupModel } from \"./MenuGroupModel\";\r\n\r\nexport interface ModelCollection extends ModelCollectionBase {\r\n    game: GameModel,\r\n    camera: CameraModel,\r\n    menu_buttons: ModelTable<ModelCollection, MenuButtonModel>,\r\n    menu_groups: ModelTable<ModelCollection, MenuGroupModel>,\r\n}\r\n\r\nexport function create_models(): ModelCollection {\r\n    const collection: ModelCollection = {} as ModelCollection;\r\n    return Object.assign(collection, {\r\n        game: new GameModel(collection),\r\n        camera: new CameraModel(collection),\r\n        menu_buttons: new ModelTable(collection, MenuButtonModel),\r\n        menu_groups: new ModelTable(collection, MenuGroupModel),\r\n    });\r\n}","import { ControllerCollection, create_controllers } from \"../controllers/ControllerCollection\";\r\nimport { create_views, ViewCollection } from \"../views/ViewCollection\";\r\nimport { create_models, ModelCollection } from \"../models/ModelCollection\";\r\nimport { MvcCanvasGame } from \"@game.object/ts-game-toolbox/src/abstract/mvc/MvcCanvasGame\";\r\nimport { ControllerRouteResponse } from \"@game.object/ts-game-toolbox/src/abstract/mvc/controllers/ControllerRouteResponse\";\r\n\r\nexport class Game extends MvcCanvasGame<ModelCollection, ViewCollection, ControllerCollection> {\r\n\r\n\r\n    public attach_event_listeners() {\r\n        super.attach_event_listeners();\r\n    }\r\n\r\n    public update(delta_seconds: number) {\r\n        super.update(delta_seconds);\r\n    }\r\n\r\n    protected start(): ControllerRouteResponse {\r\n        return this.controllers.game_controller.new_game();\r\n    }\r\n\r\n    protected create_models(): ModelCollection {\r\n        return create_models();\r\n    }\r\n\r\n    protected create_views(canvas: HTMLCanvasElement): ViewCollection {\r\n        return create_views(canvas);\r\n    }\r\n\r\n    protected create_controllers(models: ModelCollection, views: ViewCollection): ControllerCollection {\r\n        return create_controllers(models, views);\r\n    }\r\n}","import { Game } from \"./base/Game\";\r\n\r\nexport function load_game() {\r\n    start_game();\r\n}\r\n\r\nfunction start_game(): Game {\r\n    let game: Game = new Game();\r\n    let now = performance.now();\r\n    let animation_frame = (timestamp: number) => {\r\n        const delta_ms = 16; (timestamp - now);\r\n        game.update(delta_ms / 1000);\r\n        now = timestamp;\r\n        game.draw();\r\n        requestAnimationFrame(animation_frame);\r\n    }\r\n    requestAnimationFrame(animation_frame);\r\n    return game;\r\n} ","import { load_game } from \"./game/main\";\r\n\r\n(() => {\r\n    const app = document.getElementById('app');\r\n    if (!(app instanceof HTMLDivElement)) throw new Error(\"Could not locate canvas\");\r\n    load_game();\r\n})();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}