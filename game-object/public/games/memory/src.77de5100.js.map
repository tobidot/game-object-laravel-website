{"version":3,"sources":["../node_modules/@game.object/ts-game-toolbox/src/data/RgbColor.ts","../../../../src/abstract/mvc/Controller.ts","game/controllers/BaseController.ts","game/controllers/GameController.ts","../../../src/geometries/Vector2.ts","../../../src/geometries/Rect.ts","../../../../src/abstract/mvc/ControllerEvent.ts","../../../../src/abstract/mvc/View.ts","../../../../../src/abstract/mvc/helpers/ControllerResponse.ts","../../../../../src/abstract/mvc/controllers/PromiseController.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/Model.ts","game/models/PlayerModel.ts","game/controllers/event_controllers/GameEventController.ts","../../../src/signals/ChainProperty.ts","game/controllers/DelayController.ts","game/controllers/ControllerCollection.ts","../../../src/signals/SignalSocket.ts","../../../src/signals/ObservableSocket.ts","../../../src/signals/index.ts","../../../../src/assets/manager/AssetManager.ts","../../../src/assets/index.ts","../../../src/geometries/index.ts","../../../../src/testing/exceptions/ExceptionExpectedException.ts","../../../src/testing/TestClass.ts","../../../src/testing/TestConsoleLogElement.ts","../../../src/testing/TestDashboard.ts","../../../src/testing/index.ts","../../../../src/trees/exceptions/TreeElementNotFoundException.ts","../../../src/trees/QuadTree.ts","../../../src/trees/index.ts","../../../../src/abstract/mvc/Model.ts","../../../../src/abstract/mvc/CanvasView.ts","../../../../../src/abstract/mvc/helpers/ControllerEvent.ts","../../../../src/abstract/mvc/MVCgame.ts","../../../../src/abstract/mvc/MvcCanvasGame.ts","../../../../src/abstract/mvc/ModelTable.ts","../../../src/abstract/index.ts","../../../src/data/RgbColor.ts","../../../src/data/index.ts","../../../src/commons/Colors.ts","../../../src/commons/index.ts","../index.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/View.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/CanvasView.ts","game/views/main/MainView.ts","game/views/ViewCollection.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/ModelTable.ts","tools/helper.ts","game/models/CameraModel.ts","game/models/GameModel.ts","game/models/MemoryCardModel.ts","game/models/ModelCollection.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/Controller.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/ControllerEvent.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/helpers/ControllerResponse.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/MvcGame.ts","../node_modules/@game.object/ts-game-toolbox/src/abstract/mvc/MvcCanvasGame.ts","game/base/Game.ts","game/main.ts","index.ts","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"src.77de5100.js","sourceRoot":"..\\src","sourcesContent":["export class RgbColor {\r\n    public constructor(\r\n        public r: number = 0,\r\n        public g: number = 0,\r\n        public b: number = 0,\r\n        public a: number = 255,\r\n    ) {\r\n\r\n    }\r\n\r\n    public to_hex(): string {\r\n        return \"#\" + [this.r, this.g, this.b, this.a].map(v => (\"00\" + v.toString(16)).substr(-2)).join('');\r\n    }\r\n\r\n    public lerp(other: RgbColor, t: number): RgbColor {\r\n        return new RgbColor(\r\n            this.r * (1 - t) + other.r * t,\r\n            this.g * (1 - t) + other.g * t,\r\n            this.b * (1 - t) + other.b * t,\r\n            this.a * (1 - t) + other.a * t,\r\n        );\r\n    }\r\n}","import { ControllerCollectionBase, ModelCollectionBase, ViewCollectionBase } from \"./Collections\";\r\nimport { ControllerEvent } from \"./ControllerEvent\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./ControllerRouteResponse\";\r\n\r\nexport interface ControllerInterface {\r\n\r\n}\r\nexport class Controller<\r\n    MODEL_COLLECTION extends ModelCollectionBase,\r\n    VIEW_COLLECTION extends ViewCollectionBase,\r\n    CONTROLLER_COLLECTION extends ControllerCollectionBase\r\n    > implements ControllerInterface {\r\n    public constructor(\r\n        protected models: MODEL_COLLECTION,\r\n        protected views: VIEW_COLLECTION,\r\n        protected controllers: CONTROLLER_COLLECTION,\r\n    ) {\r\n\r\n    }\r\n}\r\n\r\nexport function is_controller_interface(controller: any): controller is ControllerInterface {\r\n    return controller instanceof Controller;\r\n}\r\nexport interface EventControllerInterface {\r\n    key_up?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    key_down?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    key_pressed?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    mouse_up?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_down?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_pressed?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_moved?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    update?: (delta_seconds: number) => ControllerRouteResponse;\r\n    dispatch_event?: (event: ControllerEvent) => ControllerRouteResponse;\r\n}\r\n\r\nexport function is_event_controller_interface(controller: any): controller is EventControllerInterface {\r\n    return controller instanceof Controller;\r\n}","import { Controller } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/Controller\";\r\nimport { ModelCollection } from \"../models/ModelCollection\";\r\nimport { ViewCollection } from \"../views/ViewCollection\";\r\nimport { ControllerCollection } from \"./ControllerCollection\";\r\n\r\nexport class BaseController extends Controller<ModelCollection, ViewCollection, ControllerCollection> {\r\n\r\n}\r\n","import {\r\n    ControllerRouteResponse,\r\n    ControllerRouteResponseType\r\n} from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/ControllerRouteResponse\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { PlayerModel } from \"../models/PlayerModel\";\r\nimport { BaseController } from \"./BaseController\";\r\n\r\nexport class GameController extends BaseController {\r\n\r\n    public readonly colord_gradients = 3;\r\n    public readonly board_size = 6;\r\n    public readonly board_spacing = 80;\r\n    public readonly card_size = 60;\r\n\r\n    public all_colors = (() => {\r\n        let step = Math.trunc(0xdf / this.colord_gradients) + 0x20;\r\n        let buffer: Array<RgbColor> = [];\r\n        for (let r = 0x20; r <= 0xff; r += step) {\r\n            for (let g = 0x20; g <= 0xff; g += step) {\r\n                for (let b = 0x20; b <= 0xff; b += step) {\r\n                    if (r === b && b === g) continue;\r\n                    buffer.push(new RgbColor(\r\n                        r, g, b\r\n                    ));\r\n                }\r\n            }\r\n        }\r\n        return buffer;\r\n    })();\r\n\r\n    /**\r\n     * Start a new game\r\n     */\r\n    public new_game(): ControllerRouteResponse {\r\n        this.new_players();\r\n        this.new_memory_cards();\r\n        this.shuffle_memory_cards();\r\n\r\n        /// response\r\n        this.models.camera.center.set(400 - this.board_spacing * this.board_size / 2, 300 - this.board_spacing * this.board_size / 2);\r\n        const response: ControllerRouteResponseType = {\r\n            view: this.views.main\r\n                .current_player.set(this.models.game.active_player)\r\n                .players.set(this.models.players.all())\r\n                .memory_cards.set(this.models.cards.all())\r\n                .camera.set(this.models.camera),\r\n            controller: this.controllers.for_event.game_controller,\r\n        };\r\n        return response;\r\n    }\r\n\r\n    protected new_memory_cards() {\r\n        let last_color: RgbColor | null = null;\r\n        for (let x = 0; x < this.board_size; x++) {\r\n            for (let y = 0; y < this.board_size; y++) {\r\n                let card = this.models.cards.insert_new();\r\n                card.collider.set(x * this.board_spacing + 10, y * this.board_spacing + 10, this.card_size, this.card_size);\r\n                card.is_revealed = false;\r\n\r\n                if (last_color === null) {\r\n                    card.color = last_color = this.get_random_color();\r\n                } else {\r\n                    card.color = last_color;\r\n                    last_color = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    protected shuffle_memory_cards() {\r\n        const all_cards = this.models.cards.all();\r\n        for (let i = 0; i < 25 * 2; ++i) {\r\n            const card_a = all_cards[Math.trunc(all_cards.length * Math.random())];\r\n            const card_b = all_cards[Math.trunc(all_cards.length * Math.random())];\r\n            // swap the colors\r\n            [card_a.color, card_b.color] = [card_b.color, card_a.color];\r\n        }\r\n    }\r\n\r\n    protected new_players() {\r\n        for (let i = 0; i < 2; ++i) {\r\n            this.models.players.insert_new((model: PlayerModel) => {\r\n                model.points = 0;\r\n                model.selected_card = null;\r\n                this.models.game.max_player_id = model.id;\r\n                return model;\r\n            });\r\n        }\r\n        this.models.game.active_player = this.models.players.all()[0];\r\n    }\r\n\r\n    public get_random_color(): RgbColor {\r\n        return this.all_colors[Math.trunc(Math.random() * this.all_colors.length)];\r\n    }\r\n\r\n\r\n\r\n}","type radians = number;\r\ntype degrees = number;\r\n\r\nexport interface Vector2I {\r\n    x: number;\r\n    y: number;\r\n}\r\n\r\nexport class Vector2 {\r\n    public x: number;\r\n    public y: number;\r\n\r\n    public constructor(vec: Readonly<Vector2I>)\r\n    public constructor(x?: number, y?: number)\r\n    public constructor(x: number | Readonly<Vector2I> = 0, y: number = 0) {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n    }\r\n\r\n    public set(vec: Readonly<Vector2I>): this\r\n    public set(x: number, y: number): this\r\n    public set(x: number | Readonly<Vector2I>, y: number = 0): this {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public sub(other: Vector2I): this {\r\n        this.x -= other.x;\r\n        this.y -= other.y;\r\n        return this;\r\n    }\r\n\r\n    public add(other: Vector2I): this {\r\n        this.x += other.x;\r\n        this.y += other.y;\r\n        return this;\r\n    }\r\n\r\n    public mul(scalar: number): this {\r\n        this.x *= scalar;\r\n        this.y *= scalar;\r\n        return this;\r\n    }\r\n\r\n    public divide(scalar: number): this {\r\n        this.x /= scalar;\r\n        this.y /= scalar;\r\n        return this;\r\n    }\r\n\r\n    public len2(): number {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n\r\n    public len(): number {\r\n        return Math.sqrt(this.len2());\r\n    }\r\n\r\n    public set_magnitude(magnitude: number): this {\r\n        const len = this.len();\r\n        this.x = this.x / len * magnitude;\r\n        this.y = this.y / len * magnitude;\r\n        return this;\r\n    }\r\n\r\n    public dot(other: Vector2I): number {\r\n        return this.x * other.x + this.y * other.y;\r\n    }\r\n\r\n    public cross(other: Vector2I): Vector2 {\r\n        return new Vector2(this.x * other.y, this.y * other.x);\r\n    }\r\n\r\n    public get_unsigned(): Vector2 {\r\n        return new Vector2(Math.abs(this.x), Math.abs(this.y));\r\n    }\r\n\r\n    public cpy(): Vector2 {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n\r\n    public normalize(): this {\r\n        const len = this.len();\r\n        if (len < 0.000001) return this;\r\n        this.x /= len;\r\n        this.y /= len;\r\n        return this;\r\n    }\r\n\r\n    public get_projection_of(other: Vector2I): Vector2 {\r\n        const len = this.dot(other) / this.len2();\r\n        return this.cpy().mul(len);\r\n    }\r\n\r\n    public is_null_vector(): boolean {\r\n        return Math.abs(this.x) < 0.001 && Math.abs(this.y) < 0.001;\r\n    }\r\n\r\n    public get_angle(): radians {\r\n        // let 0 be showing up (0,1)\r\n        return (Math.atan2(this.y, this.x) + (Math.PI / 2)) % (2 * Math.PI);\r\n    }\r\n\r\n    public rotate_radians_clockwise(radians: number): this {\r\n        const sin = Math.sin(radians);\r\n        const cos = Math.cos(radians);\r\n        const new_x = -sin * this.y + cos * this.x;\r\n        const new_y = sin * this.x + cos * this.y;\r\n        this.y = new_y;\r\n        this.x = new_x;\r\n        return this;\r\n    }\r\n\r\n    public rotate_right_angles_clockwise(count: number = 1): this {\r\n        if (count < 1) return this;\r\n        const new_x = this.y;\r\n        this.y = -this.x;\r\n        this.x = new_x;\r\n        return this.rotate_right_angles_clockwise(count - 1);\r\n    }\r\n\r\n    /**\r\n     * ### Static methods\r\n     */\r\n\r\n    /**\r\n     * Standard Vectors\r\n     */\r\n    public static readonly RIGHT = new Vector2(1, 0);\r\n    public static readonly LEFT = new Vector2(-1, 0);\r\n    public static readonly UP = new Vector2(0, -1);\r\n    public static readonly DOWN = new Vector2(0, 1);\r\n\r\n    /**\r\n     * Create a Vector2 from an angle and a length.\r\n     * An angle of 0 points to the right, turning clockwise.\r\n     *\r\n     * @param angle\r\n     * @param length\r\n     */\r\n    public static from_angle(angle: radians, length: number = 1): Vector2 {\r\n        return new Vector2(Math.cos(angle) * length, Math.sin(angle) * length);\r\n    }\r\n\r\n}","import {Vector2, Vector2I} from \"./Vector2\";\r\n\r\nexport interface RectI {\r\n    x: number,\r\n    y: number,\r\n    w: number,\r\n    h: number\r\n}\r\n\r\n/**\r\n * @class Rect\r\n * A helper class for Rectangles\r\n */\r\nexport class Rect implements RectI {\r\n    public constructor(public x: number = 0, public y: number = 0, public w: number = 0, public h: number = 0) {\r\n\r\n    }\r\n\r\n    public get left(): number {\r\n        return this.x;\r\n    }\r\n\r\n    public get_left(): number {\r\n        return this.x;\r\n    }\r\n\r\n    public get top(): number {\r\n        return this.y;\r\n    }\r\n\r\n    public get_top(): number {\r\n        return this.y;\r\n    }\r\n\r\n    public get right(): number {\r\n        return this.x + this.w;\r\n    }\r\n\r\n    public get_right(): number {\r\n        return this.x + this.w;\r\n    }\r\n\r\n    public get_bottom(): number {\r\n        return this.y + this.h;\r\n    }\r\n\r\n    public get bottom(): number {\r\n        return this.y + this.h;\r\n    }\r\n\r\n    public get width(): number {\r\n        return this.w;\r\n    }\r\n\r\n    public get_width(): number {\r\n        return this.w;\r\n    }\r\n\r\n    public get height(): number {\r\n        return this.h;\r\n    }\r\n\r\n    public get_height(): number {\r\n        return this.h;\r\n    }\r\n\r\n    public cpy(): Rect {\r\n        return new Rect(this.x, this.y, this.w, this.h);\r\n    }\r\n\r\n    public set(x: RectI): this;\r\n    public set(x: number, y: number, w?: number, h?: number): this;\r\n    public set(x: number | RectI, y?: number, w?: number, h?: number): this {\r\n        if (typeof x === \"object\") {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n            this.w = x.w;\r\n            this.h = x.h;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y as number;\r\n            if (w !== undefined) this.w = w;\r\n            if (h !== undefined) this.h = h;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Secondary properties\r\n     */\r\n\r\n    public get_area(): number {\r\n        return this.w * this.h;\r\n    }\r\n\r\n    public get center(): Vector2I {\r\n        return new Vector2(this.x + this.w / 2, this.y + this.h / 2);\r\n    }\r\n\r\n    public set center(center: Vector2I) {\r\n        this.x = center.x - this.w / 2;\r\n        this.y = center.y - this.h / 2;\r\n    }\r\n\r\n    public set_center(center: Vector2I): this {\r\n        this.center = center;\r\n        return this;\r\n    }\r\n\r\n\r\n    /**\r\n     * Expand this rectangle to include the given target.\r\n     * @param target\r\n     */\r\n    public expand_to(target: Readonly<Vector2I>): this {\r\n        if (this.contains(target)) return this;\r\n        const left = Math.min(this.x, target.x);\r\n        const top = Math.min(this.y, target.y);\r\n        const right = Math.max(this.get_right(), target.x);\r\n        const bottom = Math.max(this.get_bottom(), target.y);\r\n        return this.set(left, top, right - left, bottom - top);\r\n    }\r\n\r\n    public overlaps_with(other: RectI): boolean {\r\n        return Rect.overlap(this, other);\r\n    }\r\n\r\n    public is_within(outer: RectI): boolean {\r\n        return Rect.is_within(this, outer);\r\n    }\r\n\r\n    public contains(point: Vector2I): boolean;\r\n    public contains(x: number, y: number): boolean;\r\n    public contains(x: number | Vector2I, y?: number): boolean {\r\n        if (typeof x === \"object\") {\r\n            return Rect.contains(this, x);\r\n        }\r\n        if (typeof y !== \"number\") throw new Error(\"Unexpected type error\");\r\n        return Rect.contains(this, {x, y});\r\n    }\r\n\r\n    /**\r\n     * Manipulate this rectangle to change into the target rectangle by the factor t.\r\n     *\r\n     * @param target\r\n     * @param t\r\n     *  0 => rectangle is unchanged\r\n     *  ..\r\n     *  1 => the rectangle is identical to the target rectangle.\r\n     */\r\n    public lerp(target: Rect, t: number): this {\r\n        const it = 1 - t;\r\n        this.x = this.x * it + target.x * t;\r\n        this.y = this.y * it + target.y * t;\r\n        this.w = this.w * it + target.w * t;\r\n        this.h = this.h * it + target.h * t;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * This functions returns the corners of this rectangle in clockwise order.\r\n     * Starting with the left-top one.\r\n     *\r\n     * @returns array\r\n     * [ left_top, right_top, right_bottom, left_bottom ]\r\n     */\r\n    public get_corners(): [Vector2I, Vector2I, Vector2I, Vector2I] {\r\n        return [\r\n            {x: this.left, y: this.top},\r\n            {x: this.right, y: this.top},\r\n            {x: this.right, y: this.bottom},\r\n            {x: this.left, y: this.bottom},\r\n        ];\r\n    }\r\n\r\n\r\n    /**\r\n     * ### static function\r\n     */\r\n\r\n    /**\r\n     * Is the given point inside the rectangle.\r\n     * The borders of the rectangle count as inside.\r\n     * @see Rect.contains_exclusive\r\n     *\r\n     * @param rect\r\n     *  The rectangle defining the boundry\r\n     * @param point\r\n     *  The point to check\r\n     * @return boolean\r\n     *  True => the point is inside\r\n     */\r\n    public static contains(rect: RectI, point: Vector2I): boolean {\r\n        return (point.x >= rect.x && point.y >= rect.y && point.x <= rect.x + rect.w && point.y <= rect.y + rect.h);\r\n    }\r\n\r\n    /**\r\n     * Is the given point inside the rectangle.\r\n     * The borders of the rectangle count as outside.\r\n     * @see Rect.contains\r\n     *\r\n     * @param rect\r\n     *  The rectangle bilding the boundry\r\n     * @param point\r\n     *  The point to check\r\n     * @return boolean\r\n     *  True => the point is inside\r\n     */\r\n    public static contains_exclusive(rect: RectI, point: Vector2I): boolean {\r\n        return (point.x > rect.x && point.y > rect.y && point.x < rect.x + rect.w && point.y < rect.y + rect.h);\r\n    }\r\n\r\n    /**\r\n     * Do theses Rectangles overlap\r\n     * @param a\r\n     * @param b\r\n     */\r\n    public static overlap(a: RectI, b: RectI): boolean {\r\n        const overlap_x = (a.x + a.w > b.x && a.x <= b.x) || (b.x + b.w > a.x && b.x <= a.x);\r\n        const overlap_y = (a.y + a.h > b.y && a.y <= b.y) || (b.y + b.h > a.y && b.y <= a.y);\r\n        return overlap_x && overlap_y;\r\n    }\r\n\r\n    /**\r\n     * Is the inner rectangle completly within the outer rectangle.\r\n     *\r\n     * @param inner\r\n     * @param outer\r\n     */\r\n    public static is_within(inner: RectI, outer: RectI) {\r\n        const within_x = inner.x > outer.x && inner.x + inner.w < outer.x + outer.w;\r\n        const within_y = inner.y > outer.y && inner.y + inner.h < outer.y + outer.h;\r\n        return within_x && within_y;\r\n    }\r\n}\r\n","export interface ControllerEvent {\r\n    event_name: string;\r\n    fire_at?: number;\r\n}\r\n\r\nexport function is_controller_event(object: any): object is ControllerEvent {\r\n    return typeof object === \"object\" && \"event_name\" in object;\r\n}","import { ViewCollectionBase } from \"./Collections\";\r\n\r\nexport interface ViewInterface {\r\n    update: (() => void) | null;\r\n    draw: () => void;\r\n    set_update: (update: () => void) => this;\r\n}\r\n\r\nexport function is_view_interface(view: any): view is ViewInterface {\r\n    return view instanceof View;\r\n}\r\nexport class View<VIEW_COLLECTION extends ViewCollectionBase> implements ViewInterface {\r\n    public constructor(protected collection: VIEW_COLLECTION) {\r\n\r\n    }\r\n    public update: (() => void) | null = null;\r\n    public draw() { };\r\n\r\n    public set_update(update: () => void): this {\r\n        this.update = update;\r\n        return this;\r\n    }\r\n}","import { is_event_controller_interface } from \"../Controller\";\r\nimport { is_controller_event } from \"../ControllerEvent\";\r\nimport { ControllerRouteResponseType, ControllerRouteResponse } from \"../ControllerRouteResponse\";\r\nimport { is_view_interface } from \"../View\";\r\n\r\n\r\nexport function update_controller_response<T extends ControllerRouteResponseType>(base: T, response: ControllerRouteResponse): T {\r\n    if (response === null) {\r\n        return base;\r\n    }\r\n    if (is_view_interface(response)) {\r\n        base.view = response;\r\n        return base;\r\n    }\r\n    if (is_event_controller_interface(response)) {\r\n        base.controller = response;\r\n        return base;\r\n    }\r\n    if (is_controller_event(response)) {\r\n        if (base.events === undefined) base.events = [];\r\n        base.events.push(response);\r\n        return base;\r\n    }\r\n    base.controller = response.controller;\r\n    base.view = response.view;\r\n    if (response.events !== undefined) {\r\n        if (base.events === undefined) base.events = [];\r\n        base.events.push(...response.events);\r\n    }\r\n    return base;\r\n}","import { EventControllerInterface, ControllerInterface } from \"../Controller\";\r\nimport { ControllerEvent } from \"../ControllerEvent\";\r\nimport { ControllerRouteResponseType, ControllerRouteResponse } from \"../ControllerRouteResponse\";\r\nimport { update_controller_response } from \"../helpers/ControllerResponse\";\r\nimport { ViewInterface } from \"../View\";\r\n\r\n\r\nexport interface PromisableController {\r\n    next: null | (() => ControllerRouteResponseType);\r\n}\r\n\r\nexport type PromisableControllerRouteResponseType = ControllerRouteResponseType & { controller: PromisableController };\r\nexport type PromisableControllerRouteResponse = null | ViewInterface | (EventControllerInterface & PromisableController) | ControllerEvent | PromisableControllerRouteResponseType;\r\ntype PromiseResolver = () => PromisableControllerRouteResponseType;\r\ntype NonPromiseResolver = () => (ControllerRouteResponseType);\r\n\r\nexport class PromiseController implements ControllerRouteResponseType {\r\n    protected next: PromiseController | null = null;\r\n    protected resolver: PromiseResolver;\r\n    protected cached_response: ControllerRouteResponseType | null = null;\r\n\r\n    public constructor(resolver: PromiseResolver | PromisableControllerRouteResponseType) {\r\n        this.resolver = this.create_resolver_function(resolver);\r\n    }\r\n\r\n    protected create_resolver_function(resolver: PromiseResolver | PromisableControllerRouteResponseType): PromiseResolver {\r\n        return () => {\r\n            const response: PromisableControllerRouteResponseType = (typeof resolver === \"object\") ? resolver : resolver();\r\n            response.controller.next = this.create_controller_next_function(response);\r\n            return response;\r\n        };\r\n    }\r\n\r\n    protected create_controller_next_function(response: PromisableControllerRouteResponseType) {\r\n        return () => {\r\n            if (this.next === null) return this;\r\n            this.resolver = this.next.resolver;\r\n            this.cached_response = null;\r\n            this.next = this.next.next;\r\n            return this;\r\n        };\r\n    }\r\n\r\n    protected get response(): ControllerRouteResponseType {\r\n        if (this.cached_response) return this.cached_response;\r\n        const response: (ControllerRouteResponse) = this.resolver();\r\n        this.cached_response = {};\r\n        update_controller_response(this.cached_response, response);\r\n        return this.cached_response;\r\n    }\r\n\r\n    public get view(): ViewInterface | null | undefined {\r\n        return this.response?.view;\r\n    }\r\n\r\n    public get controller(): ControllerInterface | null | undefined {\r\n        return this.response?.controller;\r\n    }\r\n\r\n    public get events(): Array<ControllerEvent> | undefined {\r\n        return this.response?.events;\r\n    }\r\n\r\n    public then(resolve: PromiseResolver | PromisableControllerRouteResponseType | PromiseController): PromiseController {\r\n        if (this.next) {\r\n            this.next.then(resolve);\r\n        } else {\r\n            if (resolve instanceof PromiseController) {\r\n                this.next = resolve;\r\n            } else {\r\n                this.next = new PromiseController(resolve);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public finaly(resolve: NonPromiseResolver | ControllerRouteResponseType): PromiseController {\r\n        if (this.next) {\r\n            this.next.finaly(resolve);\r\n        } else {\r\n            this.next = new FinalPromiseController(resolve);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class FinalPromiseController extends PromiseController {\r\n    public constructor(resolver: NonPromiseResolver | ControllerRouteResponseType) {\r\n        super((): PromisableControllerRouteResponseType => {\r\n            const response: ControllerRouteResponseType = (typeof resolver === \"object\") ? resolver : resolver();\r\n            return response as PromisableControllerRouteResponseType;\r\n        });\r\n    }\r\n\r\n    protected create_resolver_function(resolver: PromiseResolver | PromisableControllerRouteResponseType): PromiseResolver {\r\n        return () => {\r\n            return (typeof resolver === \"object\") ? resolver : resolver();\r\n        };\r\n    }\r\n}\r\n","import { ModelCollectionBase } from \"./Collections\";\r\n\r\nexport interface ModelInterface {\r\n\r\n}\r\n\r\nexport class Model<MODEL_COLLECTION extends ModelCollectionBase> implements ModelInterface {\r\n    constructor(protected models: MODEL_COLLECTION) { }\r\n}","import { ControllerRouteResponse } from \"@game.object/ts-game-toolbox/src/abstract/mvc/ControllerRouteResponse\";\r\nimport { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Model\";\r\nimport { assert_never } from \"../../tools/helper\";\r\nimport { MemoryCardModel } from \"./MemoryCardModel\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\n\r\nexport type PickCardResponseCallback = (previous: ControllerRouteResponse, picked_card: MemoryCardModel) => ControllerRouteResponse;\r\nexport enum PickCardResponseType {\r\n    INVALID_MOVE,\r\n    REVEALED_FIRST_CARD,\r\n    REVEALED_FITTING_PAIR,\r\n    REVEALED_UNFITTING_PAIR,\r\n};\r\nexport class PickCardResponse {\r\n    public response: ControllerRouteResponse = {};\r\n    public constructor(\r\n        private state: PickCardResponseType,\r\n        private picked_card: MemoryCardModel\r\n    ) { }\r\n    public do_on(callback: PickCardResponseCallback, ...events: PickCardResponseType[]): this {\r\n        if (events.includes(this.state)) {\r\n            this.response = callback(this.response, this.picked_card);\r\n        }\r\n        return this;\r\n    };\r\n}\r\n\r\n/**\r\n * Model representing the player state\r\n */\r\nexport class PlayerModel extends Model<ModelCollection> {\r\n    private static next_id = 1;\r\n    public id: number = PlayerModel.next_id++;\r\n    //\r\n    public selected_card: MemoryCardModel | null = null;\r\n    public points: number = 0;\r\n    // \r\n    /**\r\n     * \r\n     * @param card \r\n     *  the card the player has selected\r\n     * @return PickCardResponse\r\n     *  returns the possible outcomes\r\n     */\r\n    public pick_card(card: MemoryCardModel): PickCardResponse {\r\n        if (card.is_drawn) return new PickCardResponse(PickCardResponseType.INVALID_MOVE, card);\r\n        if (!this.selected_card) {\r\n            return new PickCardResponse(PickCardResponseType.REVEALED_FIRST_CARD, card);\r\n        } else {\r\n            if (this.selected_card === card) return new PickCardResponse(PickCardResponseType.INVALID_MOVE, card);\r\n            if (this.selected_card.color === card.color) {\r\n                return new PickCardResponse(PickCardResponseType.REVEALED_FITTING_PAIR, card);\r\n            } else {\r\n                return new PickCardResponse(PickCardResponseType.REVEALED_UNFITTING_PAIR, card);\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { BaseController } from \"../BaseController\";\r\nimport { EventControllerInterface } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/Controller\";\r\nimport { ControllerRouteResponse } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/ControllerRouteResponse\";\r\nimport { Rect } from \"@game.object/ts-game-toolbox/dist/src/geometries/Rect\";\r\nimport { MemoryCardModel } from \"../../models/MemoryCardModel\";\r\nimport { CameraModel } from \"../../models/CameraModel\";\r\nimport { tools } from \"@game.object/ts-game-toolbox\";\r\nimport { PromiseController } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/controllers/PromiseController\";\r\nimport { PickCardResponse, PickCardResponseType } from \"../../models/PlayerModel\";\r\n\r\nexport class GameEventController extends BaseController implements EventControllerInterface {\r\n\r\n    public update(delta_seconds: number): ControllerRouteResponse {\r\n        return null;\r\n    }\r\n\r\n    public mouse_pressed(event: MouseEvent, x: number, y: number): ControllerRouteResponse {\r\n        const camera: CameraModel = this.models.camera;\r\n        let hit: MemoryCardModel | null = this.models.cards.all()\r\n            .reduce((hit: MemoryCardModel | null, next: MemoryCardModel) => {\r\n                const screen_collider = camera.transformRect(new Rect().set(next.collider));\r\n                if (screen_collider.contains({ x, y })) return next;\r\n                return hit;\r\n            }, null);\r\n        if (hit !== null) {\r\n            const player = this.models.game.active_player\r\n            if (!player) {\r\n                throw new Error(\"Who is my player\");\r\n            }\r\n            return player.pick_card(hit)\r\n                // Nothing happens\r\n                // reveal the first card\r\n                .do_on((response, card) => {\r\n                    card.is_revealed = true;\r\n                    player.selected_card = card;\r\n                    return response;\r\n                }, PickCardResponseType.REVEALED_FIRST_CARD)\r\n                // Second Draw\r\n                .do_on((response, card) => {\r\n                    return new PromiseController(() => {\r\n                        card.is_revealed = true;\r\n                        return {\r\n                            controller: this.controllers.delay_controller\r\n                                .trigger_at.set(performance.now() + 1000 * 1),\r\n                        };\r\n                    });\r\n                }, PickCardResponseType.REVEALED_UNFITTING_PAIR,\r\n                    PickCardResponseType.REVEALED_FITTING_PAIR)\r\n                // Bad draw\r\n                .do_on((response, card) => {\r\n                    if (!(response instanceof PromiseController)) return response;\r\n                    return response.finaly(() => {\r\n                        if (!player.selected_card) return response;\r\n                        card.is_revealed = false;\r\n                        player.selected_card.is_revealed = false;\r\n                        player.selected_card = null;\r\n                        this.models.game.next_player();\r\n                        return {\r\n                            view: this.views.main.current_player.set(this.models.game.active_player),\r\n                            controller: this\r\n                        };\r\n                    });\r\n                }, PickCardResponseType.REVEALED_UNFITTING_PAIR)\r\n                // \r\n                .do_on((response, card) => {\r\n                    if (!(response instanceof PromiseController)) return response;\r\n                    return response.finaly(() => {\r\n                        if (!player.selected_card) return response;\r\n                        player.selected_card.is_drawn = card.is_drawn = true;\r\n                        player.selected_card = null;\r\n                        player.points++;\r\n                        return {\r\n                            controller: this\r\n                        };\r\n                    });\r\n                }, PickCardResponseType.REVEALED_FITTING_PAIR)\r\n                .response;\r\n        }\r\n        return null;\r\n    }\r\n\r\n}","export class ChainProperty<VIEW, PROPERTY> {\r\n    public constructor(protected view: VIEW, protected property: PROPERTY) { }\r\n    public set(value: PROPERTY): VIEW {\r\n        this.property = value;\r\n        return this.view;\r\n    }\r\n    public get(): PROPERTY {\r\n        return this.property;\r\n    }\r\n}\r\n\r\nexport var CP = ChainProperty;","import { ControllerRouteResponseType } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/ControllerRouteResponse\";\r\nimport { PromisableController } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/controllers/PromiseController\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/dist/src/signals/ChainProperty\";\r\nimport { Controller, EventControllerInterface } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Controller\";\r\nimport { BaseController } from \"./BaseController\";\r\nimport { ControllerCollection } from \"./ControllerCollection\";\r\n\r\nexport class DelayController extends BaseController implements PromisableController, EventControllerInterface {\r\n    public next: (() => ControllerRouteResponseType) | null = null;\r\n\r\n    public trigger_at = new ChainProperty<this, number>(this, 0);\r\n\r\n    public update() {\r\n        if (performance.now() > this.trigger_at.get()) {\r\n            if (this.next) return this.next();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public mouse_pressed(event: MouseEvent) {\r\n        if (this.next) return this.next();\r\n        return null;\r\n    }\r\n}","import { ModelCollection } from \"../models/ModelCollection\";\r\nimport { ViewCollection } from \"../views/ViewCollection\";\r\nimport { GameController } from \"./GameController\";\r\nimport { GameEventController } from \"./event_controllers/GameEventController\";\r\nimport { ControllerCollectionBase } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/Collections\";\r\nimport { DelayController } from \"./DelayController\";\r\n\r\nexport interface ControllerCollection extends ControllerCollectionBase {\r\n    game_controller: GameController,\r\n    delay_controller: DelayController,\r\n    for_event: {\r\n        game_controller: GameEventController,\r\n    }\r\n}\r\n\r\nexport function create_controllers(models: ModelCollection, views: ViewCollection): ControllerCollection {\r\n    const controllers: ControllerCollection = {} as ControllerCollection;\r\n    const buffer: ControllerCollection = {\r\n        game_controller: new GameController(models, views, controllers),\r\n        delay_controller: new DelayController(models, views, controllers),\r\n        for_event: {\r\n            game_controller: new GameEventController(models, views, controllers),\r\n        }\r\n    };\r\n    return Object.assign(controllers, buffer);\r\n}","export interface Listener<T> {\r\n    (signal: T): void;\r\n}\r\n\r\nexport class SignalSocket<T> {\r\n    private listeners: Array<Listener<T>> = [];\r\n    public add(listener: Listener<T>): void {\r\n        this.listeners.push(listener);\r\n    }\r\n    public remove(listener: Listener<T>): void {\r\n        const index: number = this.listeners.indexOf(listener);\r\n        if (index < 0) return;\r\n        const length = this.listeners.length;\r\n        this.listeners[index] = this.listeners[length - 1];\r\n        this.listeners.pop();\r\n    }\r\n    public trigger_event(signal: T) {\r\n        this.listeners.forEach((listener: Listener<T>) => {\r\n            listener(signal);\r\n        });\r\n    }\r\n}","import { SignalSocket } from \"./SignalSocket\";\r\n\r\n\r\nexport class ObservableSocket<T> extends SignalSocket<{ old: T, new: T }> {\r\n    constructor(private value: T) {\r\n        super();\r\n    }\r\n\r\n    public trigger_event() { throw new Error('Do not call this directly'); }\r\n\r\n    public set(new_value: T): void {\r\n        super.trigger_event({\r\n            old: this.value,\r\n            new: new_value,\r\n        });\r\n        this.value = new_value;\r\n    }\r\n\r\n    public get(): T {\r\n        return this.value;\r\n    }\r\n};","import { SignalSocket } from \"./SignalSocket\";\r\nimport { ObservableSocket } from \"./ObservableSocket\";\r\n// export * from \"./SignalSocket\";\r\n// export * from \"./ObservableSocket\";\r\n\r\nexport var signals = {\r\n    SignalSocket,\r\n    ObservableSocket,\r\n};","export class AssetManager {\r\n\r\n}","import { AssetManager } from \"./manager/AssetManager\"\r\n// export * from \"./manager/AssetManager\"\r\n\r\nexport var assets = {\r\n    AssetManager\r\n};","import {Rect} from \"./Rect\";\r\nimport {Vector2} from \"./Vector2\";\r\n\r\nexport var geometries = {\r\n    Rect,\r\n    Vector2,\r\n};","export class TestClassExceptionExpectedExcetpion extends Error {\r\n\r\n}","import { TestClassExceptionExpectedExcetpion } from \"./exceptions/ExceptionExpectedException\";\r\n\r\ntype Printable<T> = { toString(): string };\r\ntype Class<T> = { new(...args: any): T, name: string };\r\ntype Named<T> = { name: string };\r\n\r\nexport abstract class TestClass {\r\n    public abstract get_name(): string;\r\n    public set_up() { console.log(this); }\r\n    public tear_down() { }\r\n    public set_class_up() { }\r\n    public tear_class_down() { }\r\n    public run_all_test_cases() {\r\n        const test = this;\r\n        console.log(\">>> Start \" + test.get_name());\r\n        this.set_class_up();\r\n        for (const test_name of Object.getOwnPropertyNames((<any>test).__proto__)) {\r\n            const test_statement = (<any>test)[test_name];\r\n            if (typeof test_statement === \"function\" && test_name.indexOf('test') === 0) {\r\n                console.log('%c > Run ' + test_name, 'background: blue; color: yellow;');\r\n                test.set_up();\r\n                test_statement.call(test);\r\n                test.tear_down();\r\n                console.log('%c < Done ', 'background: blue; color: green;');\r\n            }\r\n        }\r\n        this.tear_class_down();\r\n        console.log(\"<<< Done \" + test.get_name());\r\n    }\r\n\r\n    public assert_exception<E extends Error>(exception: Class<E>, callback: () => void) {\r\n        try {\r\n            callback();\r\n            throw new TestClassExceptionExpectedExcetpion('Expected an exception from ' + String(callback).substr(0, 255));\r\n        } catch (error) {\r\n            if (!(error instanceof exception)) throw error;\r\n            this.success();\r\n        }\r\n    }\r\n\r\n    public assert_instance_of<T extends Printable<T>>(value: Printable<T>, expected: Class<T>): void {\r\n        if (false === value instanceof expected) {\r\n            throw new Error('Expected ' + value.toString() + ' to be of instance ' + expected.name);\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_equals<T>(value: T, expected: T): void {\r\n        if (value !== expected) {\r\n            throw new Error('Expected ' + String(value) + ' to be equal to ' + String(expected));\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_not_equals<T>(value: T, expected: T): void {\r\n        if (value === expected) {\r\n            throw new Error('Expected ' + String(value) + ' to be NOT equal to ' + String(expected));\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_true<T>(value: boolean): void {\r\n        if (value === false) {\r\n            throw new Error('Expected ' + String(value) + ' to be true');\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    public assert_false<T>(value: boolean): void {\r\n        if (value === true) {\r\n            throw new Error('Expected ' + String(value) + ' to be false');\r\n        }\r\n        this.success();\r\n    }\r\n\r\n    private success() {\r\n        console.log('.');\r\n    }\r\n}","export class TestConsoleLogElement {\r\n    private container: HTMLElement;\r\n\r\n    constructor() {\r\n        this.container = this.create_element();\r\n        this.hook_into_console_log();\r\n        this.hook_into_console_error();\r\n        this.hook_into_window_error();\r\n    }\r\n\r\n    public get_element(): HTMLElement {\r\n        return this.container;\r\n    }\r\n\r\n    public clear() {\r\n        this.container.innerHTML = \"\";\r\n    }\r\n\r\n    protected hook_into_console_log() {\r\n        const console_log = window.console.log;\r\n        console.log = (...args: any[]) => {\r\n            console_log(...args);\r\n            this.log(...args);\r\n        };\r\n    }\r\n\r\n    protected hook_into_console_error() {\r\n        const console_error = window.console.error;\r\n        console.error = (...args: any[]) => {\r\n            const text = args[0].toString();\r\n            console_error(text);\r\n            this.log(\"%c\" + text, \"color: red;\", ...args);\r\n        };\r\n    }\r\n\r\n    protected hook_into_window_error() {\r\n        window.addEventListener('error', this.window_on_error_func);\r\n    }\r\n\r\n    protected window_on_error_func: OnErrorEventHandlerNonNull = (\r\n        event: Event | string,\r\n        source?: string,\r\n        lineno?: number,\r\n        colno?: number,\r\n        error?: Error\r\n    ): any => {\r\n        if (event instanceof ErrorEvent) {\r\n            source = event.filename;\r\n            lineno = event.lineno;\r\n            colno = event.colno;\r\n            error = event.error;\r\n        }\r\n        if (error instanceof Error) {\r\n            console.error(error.name + ' : ' + error.message);\r\n        } else {\r\n            console.error(event);\r\n        }\r\n        // const source_file = source?.replace(window.location.origin, '');\r\n        // const error_position = \"[\" + [lineno, colno].join(':') + \"]\";\r\n        // console.error([...new Array(4)].map(() => '=').join('') + source_file + error_position);\r\n    }\r\n\r\n\r\n    protected create_element(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.className = \"test-console-log\";\r\n        return container;\r\n    }\r\n\r\n    public log(...args: any[]) {\r\n        const format_or_log = args.shift();\r\n        if (typeof format_or_log === \"string\") {\r\n            return this.print_format(format_or_log, ...args)\r\n                .then((...rest_args: any[]) => {\r\n                    this.log(...args);\r\n                });\r\n        } else {\r\n            args.forEach((arg: any) => {\r\n                this.print((arg).toString());\r\n            });\r\n        }\r\n    }\r\n\r\n    public async print_format(format: string, ...args: any[]) {\r\n        return new Promise((resolve, reject) => {\r\n            let style = '';\r\n            let text = format;\r\n            if (format.indexOf('%c') === 0) {\r\n                style = args[0];\r\n                text = text.substr(2);\r\n            }\r\n            while (text.indexOf('%s') !== -1) {\r\n                const next = args.shift();\r\n                if (next === null) throw Error('argument mismatch');\r\n                text = text.replace('%s', next.toString());\r\n            }\r\n            this.print(text, style)\r\n        });\r\n    }\r\n\r\n    public print(text: string, style?: string) {\r\n        const span = document.createElement('span');\r\n        if (style) span.style.cssText = style;\r\n        span.innerText = text;\r\n        this.container.append(span);\r\n    }\r\n}","import { TestConsoleLogElement } from \"./TestConsoleLogElement\";\r\nimport { TestClass } from \"./TestClass\";\r\n\r\ninterface TestDashboardElements {\r\n    dashboard: HTMLElement,\r\n    button_list: HTMLElement,\r\n    console_log: TestConsoleLogElement;\r\n}\r\n\r\nexport class TestDashboard {\r\n    private tests: Array<TestClass> = [];\r\n    private elements: TestDashboardElements;\r\n\r\n    constructor() {\r\n        this.elements = this.create_dashboard_elements();\r\n    }\r\n\r\n    public get_element(): HTMLElement {\r\n        return this.elements.dashboard;\r\n    }\r\n\r\n    protected create_dashboard_elements(): TestDashboardElements {\r\n        const dashboard = this.create_dashboard_wrapping_element();\r\n        const button_list = this.create_test_button_list();\r\n        const console_log = new TestConsoleLogElement();\r\n\r\n        dashboard.append(button_list);\r\n        dashboard.append(console_log.get_element());\r\n\r\n        this.elements = {\r\n            dashboard,\r\n            button_list,\r\n            console_log,\r\n        };\r\n\r\n        return this.elements;\r\n    }\r\n\r\n    protected create_dashboard_wrapping_element(): HTMLElement {\r\n        const dashboard = document.createElement('div');\r\n        dashboard.className = 'test-dashboard';\r\n        return dashboard;\r\n    }\r\n\r\n    protected create_test_button_list(): HTMLUListElement {\r\n        const button_list = document.createElement('ul');\r\n        button_list.className = \"test-dashboard__button-list\";\r\n\r\n        const button_start_all = this.create_element_button('Run all tests', this.start_all_tests_func);\r\n        button_list.append(button_start_all);\r\n        this.tests.forEach((test: TestClass) => {\r\n            const button = this.create_element_for_test_button(test);\r\n            button_list.append(button);\r\n        });\r\n        return button_list;\r\n    }\r\n\r\n    protected create_element_for_test_button(test: TestClass): HTMLElement {\r\n        return this.create_element_button(test.get_name(), () => {\r\n            this.elements.console_log.clear();\r\n            test.run_all_test_cases();\r\n        });\r\n    }\r\n\r\n    protected create_element_button(text: string, on_click: () => void): HTMLElement {\r\n        let list_item = document.createElement('li');\r\n        let button = document.createElement('button');\r\n        button.innerText = text;\r\n        button.addEventListener('click', on_click);\r\n        list_item.append(button);\r\n        return list_item;\r\n    }\r\n\r\n    public add_test(tests: TestClass | TestClass[]): this {\r\n        if (!(tests instanceof Array)) {\r\n            tests = [tests];\r\n        }\r\n        tests.forEach((test: TestClass) => {\r\n            this.tests.push(test);\r\n            if (this.elements) {\r\n                this.elements.button_list.append(this.create_element_for_test_button(test));\r\n            }\r\n        });\r\n        return this;\r\n    }\r\n\r\n    public start_all_tests_func = () => {\r\n        this.elements.console_log.clear();\r\n        console.log('Starting Tests ... ');\r\n        for (const test of this.tests) {\r\n            test.run_all_test_cases();\r\n        }\r\n        console.log(' ... Tests finished');\r\n    }\r\n}","// export * from \"./TestClass\"\r\nimport { TestClass } from \"./TestClass\"\r\nimport { TestDashboard } from \"./TestDashboard\";\r\n\r\nexport var testing = {\r\n    TestClass,\r\n    TestDashboard,\r\n};","export class TreeElementNotFoundException extends Error {\r\n    constructor(message?: string) {\r\n        super(message);\r\n        this.name = TreeElementNotFoundException.name;\r\n        Object.setPrototypeOf(this, TreeElementNotFoundException.prototype);\r\n    }\r\n}","import { TreeElementNotFoundException } from \"./exceptions/TreeElementNotFoundException\";\r\nimport { RectI, Rect } from \"../geometries/Rect\";\r\n\r\nexport class QuadTree<T extends RectI> {\r\n    private root_branch: QuadTreeBranch<T>;\r\n\r\n    constructor(base_rect: RectI) {\r\n        this.root_branch = new QuadTreeBranch<T>(base_rect.x, base_rect.y, base_rect.w, base_rect.h);\r\n    }\r\n\r\n    public pick(rect: RectI): Array<T> {\r\n        return this.root_branch.pick(rect);\r\n    }\r\n\r\n    public add(element: T): void {\r\n        let is_within = Rect.is_within(element, this.root_branch);\r\n        if (is_within) {\r\n            this.root_branch.add(element);\r\n        } else {\r\n            this.elevate_root_branch();\r\n            this.add(element);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * First wrap the root in a branch that contains the root at the bottom right,\r\n     * then create a branch wich has that new branch in the bottom left, \r\n     * like that the tree expands in all directions \r\n     */\r\n    public elevate_root_branch() {\r\n        const old_root_branch = this.root_branch;\r\n        const extend_top_left_rect = {\r\n            x: old_root_branch.x - old_root_branch.w,\r\n            y: old_root_branch.y - old_root_branch.h,\r\n            w: old_root_branch.w * 2,\r\n            h: old_root_branch.h * 2,\r\n        };\r\n        const extend_bottom_right_rect = {\r\n            x: extend_top_left_rect.x,\r\n            y: extend_top_left_rect.y,\r\n            w: extend_top_left_rect.w * 2,\r\n            h: extend_top_left_rect.h * 2,\r\n        };\r\n\r\n        this.wrap_root_node_in_node_with_rect(extend_top_left_rect, 2);\r\n        this.wrap_root_node_in_node_with_rect(extend_bottom_right_rect, 0);\r\n    }\r\n\r\n    public wrap_root_node_in_node_with_rect(rect: RectI, node_pos: 0 | 1 | 2 | 3) {\r\n        const wrapper_node = new QuadTreeBranch<T>(\r\n            rect.x,\r\n            rect.y,\r\n            rect.w,\r\n            rect.h,\r\n        );\r\n        wrapper_node.create_child_branches();\r\n        if (!wrapper_node.child_branch_nodes) throw new Error();\r\n        wrapper_node.child_branch_nodes[node_pos] = this.root_branch;\r\n        this.root_branch = wrapper_node;\r\n    }\r\n\r\n    public change_element(element: T, rect: RectI) {\r\n        this.remove(element);\r\n        element.x = rect.x;\r\n        element.y = rect.y;\r\n        element.w = rect.w;\r\n        element.h = rect.h;\r\n        this.add(element);\r\n    }\r\n\r\n    public remove(element: T) {\r\n        if (!this.root_branch.remove(element)) {\r\n            throw new TreeElementNotFoundException();\r\n        }\r\n    }\r\n\r\n    public is_empty(): boolean {\r\n        return this.root_branch.is_empty();\r\n    }\r\n\r\n    public clear() {\r\n        this.root_branch.clear(8);\r\n    }\r\n}\r\n\r\nexport class QuadTreeBranch<T extends RectI> extends Rect {\r\n    public child_branch_nodes: [QuadTreeBranch<T>, QuadTreeBranch<T>, QuadTreeBranch<T>, QuadTreeBranch<T>] | null = null;\r\n    public elements: Array<T> = [];\r\n\r\n    public add(element: T): boolean {\r\n        if (this.child_branch_nodes === null) {\r\n            this.elements.push(element);\r\n            this.create_child_branches_if_necessary();\r\n            return true;\r\n        };\r\n        const overlapping_branches = this.child_branch_nodes.filter((branch) => {\r\n            return branch.overlaps_with(element);\r\n        }, []);\r\n        if (overlapping_branches.length === 0) throw Error('Inconsistent Result');\r\n        if (overlapping_branches.length === 1) {\r\n            overlapping_branches[0].add(element);\r\n        } else {\r\n            this.elements.push(element);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public readd_own_elements(): void {\r\n        const elements = this.elements.splice(0);\r\n        elements.forEach((element) => {\r\n            this.add(element);\r\n        });\r\n    }\r\n\r\n    public create_child_branches_if_necessary() {\r\n        if (this.elements.length < 10) return;\r\n        this.create_child_branches();\r\n        this.readd_own_elements();\r\n    }\r\n\r\n    public create_child_branches() {\r\n        const w_half = this.w / 2;\r\n        const h_half = this.h / 2;\r\n        this.child_branch_nodes = [\r\n            new QuadTreeBranch<T>(this.x, this.y, w_half, h_half),\r\n            new QuadTreeBranch<T>(this.x + w_half, this.y, w_half, h_half),\r\n            new QuadTreeBranch<T>(this.x + w_half, this.y + h_half, w_half, h_half),\r\n            new QuadTreeBranch<T>(this.x, this.y + h_half, w_half, h_half),\r\n        ];\r\n    }\r\n\r\n    public pick(rect: RectI, result: Array<T> = []): Array<T> {\r\n        if (!this.overlaps_with(rect)) return result;\r\n        result.push(...this.elements.filter((element) => Rect.overlap(rect, element)));\r\n        if (this.child_branch_nodes === null) return result;\r\n        if (this.is_within(rect)) return this.pick_all(result);\r\n        for (let branch of this.child_branch_nodes) {\r\n            branch.pick(rect, result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public pick_all(result: Array<T>): Array<T> {\r\n        result.push(...this.elements);\r\n        if (this.child_branch_nodes === null) return result;\r\n        for (let branch of this.child_branch_nodes) {\r\n            branch.pick_all(result);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public remove(element: T): boolean {\r\n        const id = this.elements.indexOf(element);\r\n        if (id !== -1) {\r\n            this.elements.splice(id, 1);\r\n            return true;\r\n        }\r\n        if (this.child_branch_nodes === null) return false;\r\n        for (let branch of this.child_branch_nodes) {\r\n            if (branch.remove(element)) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public is_empty(): boolean {\r\n        if (!this.is_self_empty()) return false;\r\n        if (this.child_branch_nodes === null) return true;\r\n        for (let branch of this.child_branch_nodes) {\r\n            if (!branch.is_empty()) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public is_self_empty(): boolean {\r\n        return this.elements.length === 0;\r\n    }\r\n\r\n    public clear(max_levels_deep: number) {\r\n        this.elements.splice(0);\r\n        if (this.child_branch_nodes) {\r\n            if (max_levels_deep <= 0) {\r\n                this.child_branch_nodes = null;\r\n            } else {\r\n                this.child_branch_nodes.forEach((node) => {\r\n                    node.clear(max_levels_deep - 1);\r\n                })\r\n            }\r\n        }\r\n    }\r\n}","import { QuadTree } from \"./QuadTree\";\r\nimport { TreeElementNotFoundException } from \"./exceptions/TreeElementNotFoundException\";\r\nexport * from \"./QuadTree\";\r\nexport * from \"./exceptions/TreeElementNotFoundException\";\r\n\r\nexport var trees = {\r\n    exceptions: {\r\n        TreeElementNotFoundException,\r\n    },\r\n    QuadTree,\r\n}","import { ModelCollectionBase } from \"./Collections\";\r\n\r\nexport interface ModelInterface {\r\n\r\n}\r\n\r\nexport class Model<MODEL_COLLECTION extends ModelCollectionBase> implements ModelInterface {\r\n    constructor(protected models: MODEL_COLLECTION) { }\r\n}","import { ViewCollectionBase } from \"./Collections\";\r\nimport { View } from \"./View\";\r\n\r\nexport class CanvasView<COLLECTION extends ViewCollectionBase> extends View<COLLECTION> {\r\n    protected context: CanvasRenderingContext2D;\r\n    public constructor(public canvas: HTMLCanvasElement, collection: COLLECTION) {\r\n        super(collection);\r\n        const ctx = canvas.getContext(\"2d\");\r\n        if (!ctx) throw new Error(\"could not create context\");\r\n        this.context = ctx;\r\n    }\r\n    protected reset_canvas_state() {\r\n        this.context.font = \"32px monospace\";\r\n        this.context.textAlign = \"left\";\r\n        this.context.fillStyle = \"black\";\r\n        this.context.strokeStyle = \"white\";\r\n    }\r\n}","import { ControllerEvent } from \"../ControllerEvent\";\r\ninterface TimeProvider {\r\n    ingame_time_in_seconds: number\r\n}\r\n\r\nexport function event(event: string | ControllerEvent, time_provider: TimeProvider): ControllerEventConstructor {\r\n    return new ControllerEventConstructor(event, time_provider);\r\n}\r\n\r\n\r\nexport class ControllerEventConstructor implements ControllerEvent {\r\n    public event_name: string;\r\n    public fire_at?: number;\r\n\r\n    constructor(public event: string | ControllerEvent, protected time_provide: TimeProvider) {\r\n        if (typeof event === \"string\") {\r\n            this.event_name = event;\r\n        } else {\r\n            this.event_name = event.event_name;\r\n            Object.assign(this, event);\r\n        }\r\n    }\r\n\r\n    public after_x_seconds(seconds: number): this {\r\n        this.fire_at = this.time_provide.ingame_time_in_seconds + seconds;\r\n        return this;\r\n    }\r\n\r\n    public set_data(data: any) {\r\n        Object.assign(this, data);\r\n        return this;\r\n    }\r\n}","import { EventControllerInterface, is_controller_interface, is_event_controller_interface } from \"./Controller\";\r\nimport { ControllerEvent, is_controller_event } from \"./ControllerEvent\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./ControllerRouteResponse\";\r\nimport { update_controller_response } from \"./helpers/ControllerResponse\";\r\nimport { is_view_interface, ViewInterface } from \"./View\";\r\n\r\n\r\n/**\r\n * <\r\n    // MODEL_COLLECTION extends ModelCollection,\r\n    // VIEW_COLLECTION extends ViewCollection,\r\n    // CONTROLLER_COLLECTION extends ControllerCollection,\r\n    // MODEL extends Model<MODEL_COLLECTION> = Model<MODEL_COLLECTION>,\r\n    // VIEW extends View<VIEW_COLLECTION> = View<VIEW_COLLECTION>,\r\n    // CONTROLLER extends Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION> = Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION>,\r\n    >\r\n */\r\nexport class MvcGame {\r\n    protected active_view: ViewInterface | null = null;\r\n    protected active_controller: EventControllerInterface | null = null;\r\n    protected event_queue: Array<ControllerEvent> = [];\r\n    public ingame_time_in_seconds = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public update(delta_seconds: number) {\r\n        this.ingame_time_in_seconds += delta_seconds;\r\n        if (!this.active_controller) return;\r\n        if (!this.active_controller.update) return;\r\n        this.apply_controller_response(this.active_controller.update(delta_seconds));\r\n        this.handle_events();\r\n    }\r\n\r\n    public handle_events() {\r\n        let event_queue_buffer = [...this.event_queue];\r\n        this.event_queue = [];\r\n        event_queue_buffer = event_queue_buffer.filter((event) => {\r\n            if (event.fire_at && event.fire_at >= this.ingame_time_in_seconds) return true;\r\n            if (!this.active_controller) return false;\r\n            if (!this.active_controller.dispatch_event) return false;\r\n            this.apply_controller_response(this.active_controller.dispatch_event(event));\r\n            return false;\r\n        });\r\n        this.event_queue = [...event_queue_buffer, ...this.event_queue];\r\n    }\r\n\r\n    public apply_controller_response(response: ControllerRouteResponse) {\r\n        const response_struct: ControllerRouteResponseType = update_controller_response({}, response);\r\n        if (response_struct.view !== undefined) {\r\n            this.set_active_view(response_struct.view);\r\n        }\r\n        if (response_struct.controller !== undefined) {\r\n            this.set_active_controller(response_struct.controller);\r\n        }\r\n        if (response_struct.events !== undefined) {\r\n            this.event_queue.push(...response_struct.events);\r\n        }\r\n    }\r\n\r\n    public draw() {\r\n        if (!this.active_view) return;\r\n        if (this.active_view.update) {\r\n            this.active_view.update();\r\n        }\r\n        this.active_view.draw();\r\n    }\r\n\r\n    protected set_active_controller(controller: EventControllerInterface | null) {\r\n        this.active_controller = controller;\r\n    }\r\n\r\n    protected set_active_view(view: ViewInterface | null) {\r\n        this.active_view = view;\r\n    }\r\n}","import { ControllerRouteResponse } from \"./ControllerRouteResponse\";\r\nimport { MvcGame } from \"./MvcGame\";\r\n\r\nexport abstract class MvcCanvasGame<MODELS, VIEWS, CONTROLLERS> extends MvcGame {\r\n    protected canvas: HTMLCanvasElement;\r\n    protected models: MODELS;\r\n    protected views: VIEWS;\r\n    protected controllers: CONTROLLERS;\r\n\r\n    constructor() {\r\n        super();\r\n        const canvas = document.getElementById('canvas');\r\n        if (!(canvas instanceof HTMLCanvasElement)) throw new Error(\"Canvas not found\");\r\n        this.canvas = canvas;\r\n        const models = this.create_models();\r\n        const views = this.create_views(canvas);\r\n        const controllers = this.create_controllers(models, views);\r\n        this.models = models;\r\n        this.views = views;\r\n        this.controllers = controllers;\r\n        this.attach_event_listeners();\r\n        this.apply_controller_response(this.start());\r\n    }\r\n\r\n    protected attach_event_listeners(): void {\r\n        this.canvas.addEventListener(\"keydown\", (event) => {\r\n            if (!this.active_controller) return;\r\n            if (this.active_controller.key_pressed) {\r\n                this.apply_controller_response(this.active_controller.key_pressed(event));\r\n            }\r\n        });\r\n        this.canvas.addEventListener(\"click\", (event) => {\r\n            if (!this.active_controller) return;\r\n            if (this.active_controller.mouse_pressed) {\r\n                const x = (event.x - this.canvas.offsetLeft) * this.canvas.width / this.canvas.clientWidth;\r\n                const y = (event.y - this.canvas.offsetTop) * this.canvas.height / this.canvas.clientHeight;\r\n                const response = this.active_controller.mouse_pressed(event, x, y);\r\n                this.apply_controller_response(response);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected abstract start(): ControllerRouteResponse;\r\n    protected abstract create_models(): MODELS;\r\n    protected abstract create_views(canvas: HTMLCanvasElement): VIEWS;\r\n    protected abstract create_controllers(models: MODELS, views: VIEWS): CONTROLLERS;\r\n}\r\n","import { ModelCollectionBase } from \"./Collections\";\r\nimport { ModelInterface } from \"./Model\";\r\n\r\ninterface ModelClass<MODEL_COLLECTION extends ModelCollectionBase, MODEL> {\r\n    new(collection: MODEL_COLLECTION): MODEL\r\n}\r\n\r\nexport class ModelTable<MODEL_COLLECTION extends ModelCollectionBase, MODEL extends ModelInterface> {\r\n    protected models: Array<MODEL> = [];\r\n    protected model_collection: MODEL_COLLECTION;\r\n    protected model_class: ModelClass<MODEL_COLLECTION, MODEL>;\r\n\r\n    public constructor(model_collection: MODEL_COLLECTION, model_class: ModelClass<MODEL_COLLECTION, MODEL>) {\r\n        this.model_collection = model_collection;\r\n        this.model_class = model_class;\r\n    }\r\n\r\n    public insert_new(modify?: (model: MODEL) => MODEL): MODEL {\r\n        return this.insert(modify\r\n            ? modify(new this.model_class(this.model_collection))\r\n            : new this.model_class(this.model_collection)\r\n        );\r\n    }\r\n\r\n    public insert(model: MODEL): MODEL {\r\n        this.models.push(model);\r\n        return model;\r\n    }\r\n\r\n    public delete(model: MODEL): void {\r\n        this.models = this.models.filter((current) => model !== current);\r\n    }\r\n\r\n    public all(): Array<MODEL> {\r\n        return this.models;\r\n    }\r\n\r\n    public filter(callback: (model: MODEL) => boolean): void {\r\n        this.models = this.models.filter(callback);\r\n    }\r\n\r\n    public map(callback: (model: MODEL) => MODEL): void {\r\n        this.models = this.models.map(callback);\r\n    }\r\n\r\n    public for_each(callback: (model: MODEL) => void) {\r\n        this.models.forEach(callback);\r\n    }\r\n\r\n    /**\r\n     * Return a filtered array of models\r\n     *\r\n     * @param property\r\n     * @param expected_value\r\n     */\r\n    public where<T extends keyof MODEL, V extends NotAFunction<MODEL[T]>>(\r\n        property: T,\r\n        expected_value: V | ((found_value: MODEL[T]) => boolean)\r\n    ): Array<MODEL> {\r\n        let callback: (model: MODEL) => boolean;\r\n        if (expected_value instanceof Function) {\r\n            callback = (model: MODEL) => expected_value(model[property]);\r\n        } else {\r\n            callback = (model: MODEL) => model[property] === expected_value;\r\n        }\r\n        return this.models.filter(callback);\r\n    }\r\n}\r\n\r\ntype NotAFunction<T> = T extends Function ? never : T;","import { Model } from \"./mvc/Model\";\r\nimport { View } from \"./mvc/View\";\r\nimport { Controller } from \"./mvc/Controller\";\r\nimport { CanvasView } from \"./mvc/CanvasView\";\r\nimport { ControllerEventConstructor } from \"./mvc/helpers/ControllerEvent\";\r\nimport { MvcGame as MvcGame } from \"./mvc/MVCgame\";\r\nimport { MvcCanvasGame } from \"./mvc/MvcCanvasGame\";\r\nimport { ModelTable } from \"./mvc/ModelTable\";\r\nimport { update_controller_response } from \"./mvc/helpers/ControllerResponse\";\r\nimport { PromiseController } from \"./mvc/controllers/PromiseController\";\r\n\r\n\r\nexport var abstract = {\r\n    mvc: {\r\n        MvcGame,\r\n        MvcCanvasGame,\r\n        CanvasView,\r\n        Model,\r\n        ModelTable,\r\n        View,\r\n        Controller,\r\n        helpers: {\r\n            ControllerEventConstructor,\r\n            update_controller_response,\r\n        },\r\n        controllers: {\r\n            PromiseController\r\n        },\r\n    },\r\n};","export class RgbColor {\r\n    public constructor(\r\n        public r: number = 0,\r\n        public g: number = 0,\r\n        public b: number = 0,\r\n        public a: number = 255,\r\n    ) {\r\n\r\n    }\r\n\r\n    public to_hex(): string {\r\n        return \"#\" + [this.r, this.g, this.b, this.a].map(v => (\"00\" + v.toString(16)).substr(-2)).join('');\r\n    }\r\n\r\n    public lerp(other: RgbColor, t: number): RgbColor {\r\n        return new RgbColor(\r\n            this.r * (1 - t) + other.r * t,\r\n            this.g * (1 - t) + other.g * t,\r\n            this.b * (1 - t) + other.b * t,\r\n            this.a * (1 - t) + other.a * t,\r\n        );\r\n    }\r\n}","import { RgbColor } from \"./RgbColor\"\r\n\r\n\r\n\r\nexport var data = {\r\n    RgbColor\r\n};","import { RgbColor } from \"../data/RgbColor\";\r\n\r\nexport var Colors = {\r\n    RED: new RgbColor(255, 0, 0),\r\n    BLUE: new RgbColor(0, 0, 255),\r\n    GREEN: new RgbColor(0, 255, 0),\r\n    BLACK: new RgbColor(0, 0, 0),\r\n    WHITE: new RgbColor(255, 255, 255),\r\n}","import { Colors } from \"./Colors\";\r\n\r\nexport var commons = {\r\n    Colors,\r\n};","\r\nimport { signals } from \"./src/signals\";\r\nimport { assets } from \"./src/assets\";\r\nimport { geometries } from \"./src/geometries\";\r\nimport { testing } from \"./src/testing\";\r\nimport { trees } from \"./src/trees\";\r\nimport { abstract } from \"./src/abstract\";\r\nimport { data } from \"./src/data\";\r\nimport { commons } from \"./src/commons\";\r\n\r\nexport var tools = {\r\n    signals,\r\n    assets,\r\n    geometries,\r\n    testing,\r\n    trees,\r\n    abstract,\r\n    data,\r\n    commons,\r\n};","import { ViewCollectionBase } from \"./Collections\";\r\n\r\nexport interface ViewInterface {\r\n    update: (() => void) | null;\r\n    draw: () => void;\r\n    set_update: (update: () => void) => this;\r\n}\r\n\r\nexport function is_view_interface(view: any): view is ViewInterface {\r\n    return view instanceof View;\r\n}\r\nexport class View<VIEW_COLLECTION extends ViewCollectionBase> implements ViewInterface {\r\n    public constructor(protected collection: VIEW_COLLECTION) {\r\n\r\n    }\r\n    public update: (() => void) | null = null;\r\n    public draw() { };\r\n\r\n    public set_update(update: () => void): this {\r\n        this.update = update;\r\n        return this;\r\n    }\r\n}","import { ViewCollectionBase } from \"./Collections\";\r\nimport { View } from \"./View\";\r\n\r\nexport class CanvasView<COLLECTION extends ViewCollectionBase> extends View<COLLECTION> {\r\n    protected context: CanvasRenderingContext2D;\r\n    public constructor(public canvas: HTMLCanvasElement, collection: COLLECTION) {\r\n        super(collection);\r\n        const ctx = canvas.getContext(\"2d\");\r\n        if (!ctx) throw new Error(\"could not create context\");\r\n        this.context = ctx;\r\n    }\r\n    protected reset_canvas_state() {\r\n        this.context.font = \"32px monospace\";\r\n        this.context.textAlign = \"left\";\r\n        this.context.fillStyle = \"black\";\r\n        this.context.strokeStyle = \"white\";\r\n    }\r\n}","import { tools } from \"@game.object/ts-game-toolbox\";\r\nimport { CanvasView } from \"@game.object/ts-game-toolbox/src/abstract/mvc/CanvasView\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/dist/src/signals/ChainProperty\";\r\nimport { ViewCollection } from \"../ViewCollection\";\r\nimport { Vector2, Vector2I } from \"@game.object/ts-game-toolbox/dist/src/geometries/Vector2\";\r\nimport { RectI } from \"@game.object/ts-game-toolbox/dist/src/geometries/Rect\";\r\nimport { CameraModel } from \"../../models/CameraModel\";\r\nimport { PlayerModel } from \"../../models/PlayerModel\";\r\n\r\ninterface ViewMemoryCardAttr {\r\n    collider: RectI;\r\n    is_revealed: boolean;\r\n    is_drawn: boolean;\r\n    color: RgbColor;\r\n}\r\n\r\ninterface ViewPlayerAttr {\r\n\r\n}\r\n\r\nexport class MainView extends CanvasView<ViewCollection> {\r\n    /// Base Colors\r\n    public bg_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.BLACK);\r\n    public fg_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.WHITE);\r\n    public hi_color = new ChainProperty<this, RgbColor>(this, tools.commons.Colors.RED);\r\n    /// memory cards\r\n    public memory_cards = new ChainProperty<this, Array<ViewMemoryCardAttr>>(this, []);\r\n    // Camera\r\n    public camera = new ChainProperty<this, CameraModel | null>(this, null);\r\n    // players \r\n    public players = new ChainProperty<this, Array<PlayerModel>>(this, []);\r\n    // players turn\r\n    public current_player = new ChainProperty<this, PlayerModel | null>(this, null);\r\n\r\n    /// configuration\r\n    private readonly card_bg_color = new RgbColor(0x08, 0x08, 0x08);\r\n\r\n    public draw(): void {\r\n        this.reset_canvas_state();\r\n        const camera = this.camera.get();\r\n        if (!camera) {\r\n            console.log('no camera');\r\n            return;\r\n        }\r\n        this.context.translate(camera.center.x, camera.center.y);\r\n        this.context.strokeStyle = \"#282828\";\r\n        this.context.beginPath();\r\n        this.memory_cards.get().forEach((card: ViewMemoryCardAttr) => {\r\n            if (card.is_drawn) return;\r\n            if (card.is_revealed) {\r\n                this.context.fillStyle = card.color.to_hex();\r\n            } else {\r\n                this.context.fillStyle = this.card_bg_color.to_hex();\r\n            }\r\n            this.context.fillRect(card.collider.x, card.collider.y, card.collider.w, card.collider.h);\r\n            this.context.rect(card.collider.x, card.collider.y, card.collider.w, card.collider.h);\r\n        });\r\n        this.players.get().forEach((player: PlayerModel) => {\r\n            if (this.current_player.get() === player) {\r\n                this.context.fillStyle = this.hi_color.get().to_hex();\r\n                this.context.fillRect((player.id - 1) * 150 + 50 - 25, 500 - 8, 150, 32)\r\n            }\r\n            this.context.fillStyle = this.fg_color.get().to_hex();\r\n            this.context.fillText(\"Player \" + player.id + \": \" + player.points, (player.id - 1) * 150 + 50, 500);\r\n        });\r\n        this.context.stroke();\r\n        this.context.resetTransform();\r\n    }\r\n\r\n    /**\r\n     * Reset default canvas state and paint the background\r\n     */\r\n    protected reset_canvas_state() {\r\n        super.reset_canvas_state();\r\n        this.context.fillStyle = this.bg_color.get().to_hex();\r\n        this.context.fillRect(0, 0, 800, 600);\r\n        this.context.fillStyle = this.fg_color.get().to_hex();\r\n        this.context.lineWidth = 2;\r\n        this.context.font = \"16px monospace\";\r\n        this.context.lineJoin = \"round\";\r\n        this.context.textAlign = \"left\";\r\n        this.context.textBaseline = \"top\";\r\n        this.context.imageSmoothingEnabled = false;\r\n    }\r\n}","import { ViewCollectionBase } from \"@game.object/ts-game-toolbox/dist/src/abstract/mvc/Collections\";\r\nimport { MainView } from \"./main/MainView\";\r\n\r\nexport interface ViewCollection extends ViewCollectionBase {\r\n    main: MainView,\r\n    partials: {\r\n    }\r\n}\r\n\r\nexport function create_views(canvas: HTMLCanvasElement): ViewCollection {\r\n    const collection: ViewCollection = {} as ViewCollection;\r\n    const main = new MainView(canvas, collection);\r\n    return Object.assign(collection, {\r\n        main,\r\n        partials: {\r\n        }\r\n    });\r\n}","import { ModelCollectionBase } from \"./Collections\";\r\nimport { ModelInterface } from \"./Model\";\r\n\r\ninterface ModelClass<MODEL_COLLECTION extends ModelCollectionBase, MODEL> {\r\n    new(collection: MODEL_COLLECTION): MODEL\r\n}\r\n\r\nexport class ModelTable<MODEL_COLLECTION extends ModelCollectionBase, MODEL extends ModelInterface> {\r\n    protected models: Array<MODEL> = [];\r\n    protected model_collection: MODEL_COLLECTION;\r\n    protected model_class: ModelClass<MODEL_COLLECTION, MODEL>;\r\n\r\n    public constructor(model_collection: MODEL_COLLECTION, model_class: ModelClass<MODEL_COLLECTION, MODEL>) {\r\n        this.model_collection = model_collection;\r\n        this.model_class = model_class;\r\n    }\r\n\r\n    public insert_new(modify?: (model: MODEL) => MODEL): MODEL {\r\n        return this.insert(modify\r\n            ? modify(new this.model_class(this.model_collection))\r\n            : new this.model_class(this.model_collection)\r\n        );\r\n    }\r\n\r\n    public insert(model: MODEL): MODEL {\r\n        this.models.push(model);\r\n        return model;\r\n    }\r\n\r\n    public delete(model: MODEL): void {\r\n        this.models = this.models.filter((current) => model !== current);\r\n    }\r\n\r\n    public all(): Array<MODEL> {\r\n        return this.models;\r\n    }\r\n\r\n    public filter(callback: (model: MODEL) => boolean): void {\r\n        this.models = this.models.filter(callback);\r\n    }\r\n\r\n    public map(callback: (model: MODEL) => MODEL): void {\r\n        this.models = this.models.map(callback);\r\n    }\r\n\r\n    public for_each(callback: (model: MODEL) => void) {\r\n        this.models.forEach(callback);\r\n    }\r\n\r\n    /**\r\n     * Return a filtered array of models\r\n     *\r\n     * @param property\r\n     * @param expected_value\r\n     */\r\n    public where<T extends keyof MODEL, V extends NotAFunction<MODEL[T]>>(\r\n        property: T,\r\n        expected_value: V | ((found_value: MODEL[T]) => boolean)\r\n    ): Array<MODEL> {\r\n        let callback: (model: MODEL) => boolean;\r\n        if (expected_value instanceof Function) {\r\n            callback = (model: MODEL) => expected_value(model[property]);\r\n        } else {\r\n            callback = (model: MODEL) => model[property] === expected_value;\r\n        }\r\n        return this.models.filter(callback);\r\n    }\r\n}\r\n\r\ntype NotAFunction<T> = T extends Function ? never : T;","export function assert_never(variable: never): never {\r\n    return variable;\r\n}\r\n","import { Rect } from \"@game.object/ts-game-toolbox/dist/src/geometries/Rect\";\r\nimport { Vector2, Vector2I } from \"@game.object/ts-game-toolbox/dist/src/geometries/Vector2\";\r\nimport { ChainProperty } from \"@game.object/ts-game-toolbox/dist/src/signals/ChainProperty\";\r\nimport { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Model\";\r\nimport { assert_never } from \"../../tools/helper\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\n\r\nexport class CameraModel extends Model<ModelCollection>{\r\n    public center = new Vector2(0, 0);\r\n\r\n    public transform(shape: Rect): Rect;\r\n    public transform(shape: Vector2): Vector2;\r\n    public transform(shape: Vector2 | Rect): Vector2 | Rect {\r\n        if (shape instanceof Rect) return this.transformRect(shape);\r\n        if (shape instanceof Vector2) return this.transformVector2(shape);\r\n        return assert_never(shape);\r\n    }\r\n\r\n    public transformVector2(vector2: Vector2): Vector2 {\r\n        return vector2.add(this.center);\r\n    }\r\n\r\n    public transformRect(rect: Rect): Rect {\r\n        rect.x += this.center.x;\r\n        rect.y += this.center.y;\r\n        return rect;\r\n    }\r\n\r\n}","import { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Model\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\nimport { PlayerModel } from \"./PlayerModel\";\r\n\r\nexport class GameModel extends Model<ModelCollection> {\r\n    public max_player_id = 0;\r\n    public active_player: PlayerModel | null = null;\r\n\r\n    public next_player() {\r\n        if (this.active_player === null) return;\r\n        if (this.active_player.id >= this.models.game.max_player_id) {\r\n            this.active_player = this.models.players.all()[0];\r\n        } else {\r\n            this.active_player = this.models.players.where('id', this.active_player.id + 1)[0];\r\n        }\r\n    }\r\n}","import { tools } from \"@game.object/ts-game-toolbox\";\r\nimport { Rect } from \"@game.object/ts-game-toolbox/dist/src/geometries/Rect\";\r\nimport { Vector2 } from \"@game.object/ts-game-toolbox/dist/src/geometries/Vector2\";\r\nimport { Model } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Model\";\r\nimport { RgbColor } from \"@game.object/ts-game-toolbox/src/data/RgbColor\";\r\nimport { ModelCollection } from \"./ModelCollection\";\r\n\r\nexport class MemoryCardModel extends Model<ModelCollection> {\r\n    public color: RgbColor = tools.commons.Colors.WHITE;\r\n    public is_revealed: boolean = false;\r\n    public is_drawn: boolean = false;\r\n    public collider: Rect = new Rect(0, 0, 0, 0);\r\n}","import { ModelCollectionBase } from \"@game.object/ts-game-toolbox/src/abstract/mvc/Collections\";\r\nimport { ModelTable } from \"@game.object/ts-game-toolbox/src/abstract/mvc/ModelTable\";\r\nimport { CameraModel } from \"./CameraModel\";\r\nimport { GameModel } from \"./GameModel\";\r\nimport { MemoryCardModel } from \"./MemoryCardModel\";\r\nimport { PlayerModel } from \"./PlayerModel\";\r\n\r\n\r\nexport interface ModelCollection extends ModelCollectionBase {\r\n    game: GameModel,\r\n    camera: CameraModel,\r\n    players: ModelTable<ModelCollection, PlayerModel>,\r\n    cards: ModelTable<ModelCollection, MemoryCardModel>,\r\n}\r\n\r\nexport function create_models(): ModelCollection {\r\n    const collection: ModelCollection = {} as ModelCollection;\r\n    return Object.assign(collection, {\r\n        game: new GameModel(collection),\r\n        camera: new CameraModel(collection),\r\n        players: new ModelTable(collection, PlayerModel),\r\n        cards: new ModelTable(collection, MemoryCardModel),\r\n    });\r\n}","import { ControllerCollectionBase, ModelCollectionBase, ViewCollectionBase } from \"./Collections\";\r\nimport { ControllerEvent } from \"./ControllerEvent\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./ControllerRouteResponse\";\r\n\r\nexport interface ControllerInterface {\r\n\r\n}\r\nexport class Controller<\r\n    MODEL_COLLECTION extends ModelCollectionBase,\r\n    VIEW_COLLECTION extends ViewCollectionBase,\r\n    CONTROLLER_COLLECTION extends ControllerCollectionBase\r\n    > implements ControllerInterface {\r\n    public constructor(\r\n        protected models: MODEL_COLLECTION,\r\n        protected views: VIEW_COLLECTION,\r\n        protected controllers: CONTROLLER_COLLECTION,\r\n    ) {\r\n\r\n    }\r\n}\r\n\r\nexport function is_controller_interface(controller: any): controller is ControllerInterface {\r\n    return controller instanceof Controller;\r\n}\r\nexport interface EventControllerInterface {\r\n    key_up?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    key_down?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    key_pressed?: (event: KeyboardEvent) => ControllerRouteResponse;\r\n    mouse_up?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_down?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_pressed?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    mouse_moved?: (event: MouseEvent, canvas_x: number, canvas_y: number) => ControllerRouteResponse;\r\n    update?: (delta_seconds: number) => ControllerRouteResponse;\r\n    dispatch_event?: (event: ControllerEvent) => ControllerRouteResponse;\r\n}\r\n\r\nexport function is_event_controller_interface(controller: any): controller is EventControllerInterface {\r\n    return controller instanceof Controller;\r\n}","export interface ControllerEvent {\r\n    event_name: string;\r\n    fire_at?: number;\r\n}\r\n\r\nexport function is_controller_event(object: any): object is ControllerEvent {\r\n    return typeof object === \"object\" && \"event_name\" in object;\r\n}","import { is_event_controller_interface } from \"../Controller\";\r\nimport { is_controller_event } from \"../ControllerEvent\";\r\nimport { ControllerRouteResponseType, ControllerRouteResponse } from \"../ControllerRouteResponse\";\r\nimport { is_view_interface } from \"../View\";\r\n\r\n\r\nexport function update_controller_response<T extends ControllerRouteResponseType>(base: T, response: ControllerRouteResponse): T {\r\n    if (response === null) {\r\n        return base;\r\n    }\r\n    if (is_view_interface(response)) {\r\n        base.view = response;\r\n        return base;\r\n    }\r\n    if (is_event_controller_interface(response)) {\r\n        base.controller = response;\r\n        return base;\r\n    }\r\n    if (is_controller_event(response)) {\r\n        if (base.events === undefined) base.events = [];\r\n        base.events.push(response);\r\n        return base;\r\n    }\r\n    base.controller = response.controller;\r\n    base.view = response.view;\r\n    if (response.events !== undefined) {\r\n        if (base.events === undefined) base.events = [];\r\n        base.events.push(...response.events);\r\n    }\r\n    return base;\r\n}","import { EventControllerInterface, is_controller_interface, is_event_controller_interface } from \"./Controller\";\r\nimport { ControllerEvent, is_controller_event } from \"./ControllerEvent\";\r\nimport { ControllerRouteResponse, ControllerRouteResponseType } from \"./ControllerRouteResponse\";\r\nimport { update_controller_response } from \"./helpers/ControllerResponse\";\r\nimport { is_view_interface, ViewInterface } from \"./View\";\r\n\r\n\r\n/**\r\n * <\r\n    // MODEL_COLLECTION extends ModelCollection,\r\n    // VIEW_COLLECTION extends ViewCollection,\r\n    // CONTROLLER_COLLECTION extends ControllerCollection,\r\n    // MODEL extends Model<MODEL_COLLECTION> = Model<MODEL_COLLECTION>,\r\n    // VIEW extends View<VIEW_COLLECTION> = View<VIEW_COLLECTION>,\r\n    // CONTROLLER extends Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION> = Controller<MODEL_COLLECTION, VIEW_COLLECTION, CONTROLLER_COLLECTION>,\r\n    >\r\n */\r\nexport class MvcGame {\r\n    protected active_view: ViewInterface | null = null;\r\n    protected active_controller: EventControllerInterface | null = null;\r\n    protected event_queue: Array<ControllerEvent> = [];\r\n    public ingame_time_in_seconds = 0;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public update(delta_seconds: number) {\r\n        this.ingame_time_in_seconds += delta_seconds;\r\n        if (!this.active_controller) return;\r\n        if (!this.active_controller.update) return;\r\n        this.apply_controller_response(this.active_controller.update(delta_seconds));\r\n        this.handle_events();\r\n    }\r\n\r\n    public handle_events() {\r\n        let event_queue_buffer = [...this.event_queue];\r\n        this.event_queue = [];\r\n        event_queue_buffer = event_queue_buffer.filter((event) => {\r\n            if (event.fire_at && event.fire_at >= this.ingame_time_in_seconds) return true;\r\n            if (!this.active_controller) return false;\r\n            if (!this.active_controller.dispatch_event) return false;\r\n            this.apply_controller_response(this.active_controller.dispatch_event(event));\r\n            return false;\r\n        });\r\n        this.event_queue = [...event_queue_buffer, ...this.event_queue];\r\n    }\r\n\r\n    public apply_controller_response(response: ControllerRouteResponse) {\r\n        const response_struct: ControllerRouteResponseType = update_controller_response({}, response);\r\n        if (response_struct.view !== undefined) {\r\n            this.set_active_view(response_struct.view);\r\n        }\r\n        if (response_struct.controller !== undefined) {\r\n            this.set_active_controller(response_struct.controller);\r\n        }\r\n        if (response_struct.events !== undefined) {\r\n            this.event_queue.push(...response_struct.events);\r\n        }\r\n    }\r\n\r\n    public draw() {\r\n        if (!this.active_view) return;\r\n        if (this.active_view.update) {\r\n            this.active_view.update();\r\n        }\r\n        this.active_view.draw();\r\n    }\r\n\r\n    protected set_active_controller(controller: EventControllerInterface | null) {\r\n        this.active_controller = controller;\r\n    }\r\n\r\n    protected set_active_view(view: ViewInterface | null) {\r\n        this.active_view = view;\r\n    }\r\n}","import { ControllerRouteResponse } from \"./ControllerRouteResponse\";\r\nimport { MvcGame } from \"./MvcGame\";\r\n\r\nexport abstract class MvcCanvasGame<MODELS, VIEWS, CONTROLLERS> extends MvcGame {\r\n    protected canvas: HTMLCanvasElement;\r\n    protected models: MODELS;\r\n    protected views: VIEWS;\r\n    protected controllers: CONTROLLERS;\r\n\r\n    constructor() {\r\n        super();\r\n        const canvas = document.getElementById('canvas');\r\n        if (!(canvas instanceof HTMLCanvasElement)) throw new Error(\"Canvas not found\");\r\n        this.canvas = canvas;\r\n        const models = this.create_models();\r\n        const views = this.create_views(canvas);\r\n        const controllers = this.create_controllers(models, views);\r\n        this.models = models;\r\n        this.views = views;\r\n        this.controllers = controllers;\r\n        this.attach_event_listeners();\r\n        this.apply_controller_response(this.start());\r\n    }\r\n\r\n    protected attach_event_listeners(): void {\r\n        this.canvas.addEventListener(\"keydown\", (event) => {\r\n            if (!this.active_controller) return;\r\n            if (this.active_controller.key_pressed) {\r\n                this.apply_controller_response(this.active_controller.key_pressed(event));\r\n            }\r\n        });\r\n        this.canvas.addEventListener(\"click\", (event) => {\r\n            if (!this.active_controller) return;\r\n            if (this.active_controller.mouse_pressed) {\r\n                const x = (event.x - this.canvas.offsetLeft) * this.canvas.width / this.canvas.clientWidth;\r\n                const y = (event.y - this.canvas.offsetTop) * this.canvas.height / this.canvas.clientHeight;\r\n                const response = this.active_controller.mouse_pressed(event, x, y);\r\n                this.apply_controller_response(response);\r\n            }\r\n        });\r\n    }\r\n\r\n    protected abstract start(): ControllerRouteResponse;\r\n    protected abstract create_models(): MODELS;\r\n    protected abstract create_views(canvas: HTMLCanvasElement): VIEWS;\r\n    protected abstract create_controllers(models: MODELS, views: VIEWS): CONTROLLERS;\r\n}\r\n","import { ControllerCollection, create_controllers } from \"../controllers/ControllerCollection\";\r\nimport { create_views, ViewCollection } from \"../views/ViewCollection\";\r\nimport { create_models, ModelCollection } from \"../models/ModelCollection\";\r\nimport { ControllerRouteResponse } from \"@game.object/ts-game-toolbox/src/abstract/mvc/ControllerRouteResponse\";\r\nimport { MvcCanvasGame } from \"@game.object/ts-game-toolbox/src/abstract/mvc/MvcCanvasGame\";\r\n\r\nexport class Game extends MvcCanvasGame<ModelCollection, ViewCollection, ControllerCollection> {\r\n\r\n\r\n    public attach_event_listeners() {\r\n        super.attach_event_listeners();\r\n    }\r\n\r\n    public update(delta_seconds: number) {\r\n        super.update(delta_seconds);\r\n    }\r\n\r\n    protected start(): ControllerRouteResponse {\r\n        return this.controllers.game_controller.new_game();\r\n    }\r\n\r\n    protected create_models(): ModelCollection {\r\n        return create_models();\r\n    }\r\n\r\n    protected create_views(canvas: HTMLCanvasElement): ViewCollection {\r\n        return create_views(canvas);\r\n    }\r\n\r\n    protected create_controllers(models: ModelCollection, views: ViewCollection): ControllerCollection {\r\n        return create_controllers(models, views);\r\n    }\r\n}","import { Game } from \"./base/Game\";\r\n\r\nexport function load_game() {\r\n    start_game();\r\n}\r\n\r\nfunction start_game(): Game {\r\n    let game: Game = new Game();\r\n    let now = performance.now();\r\n    let animation_frame = (timestamp: number) => {\r\n        const delta_ms = 16; (timestamp - now);\r\n        game.update(delta_ms / 1000);\r\n        now = timestamp;\r\n        game.draw();\r\n        requestAnimationFrame(animation_frame);\r\n    }\r\n    requestAnimationFrame(animation_frame);\r\n    return game;\r\n} ","import { load_game } from \"./game/main\";\r\n\r\n(() => {\r\n    const app = document.getElementById('app');\r\n    if (!(app instanceof HTMLDivElement)) throw new Error(\"Could not locate canvas\");\r\n    load_game();\r\n})();","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}